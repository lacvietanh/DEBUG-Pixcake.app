{"version":3,"sources":["webpack:///./node_modules/vue-virtual-collection/dist/index.js","webpack:///./src/views/Home/index.vue","webpack:///./src/views/Home/Home-item.vue","webpack:///./src/views/Home/components/optProjectDialog.vue","webpack:///src/views/Home/components/optProjectDialog.vue","webpack:///./src/views/Home/components/optProjectDialog.vue?c5c1","webpack:///./src/views/Home/components/optProjectDialog.vue?3c2b","webpack:///./src/mixins/projects/batchDeleteProject.ts","webpack:///./src/components/CollectionView/drag/swipeChooseOp.vue","webpack:///src/components/CollectionView/drag/swipeChooseOp.vue","webpack:///./src/components/CollectionView/drag/swipeChooseOp.vue?f7a9","webpack:///./src/components/CollectionView/drag/swipeChooseOp.vue?5894","webpack:///./src/components/CollectionView/drag/index.js","webpack:///./src/mixins/projects/batchSelectsProject.ts","webpack:///./src/components/CollectionView/tsVirtualCollectionView.vue","webpack:///./src/components/CollectionView/loadingMore/constant.ts","webpack:///./src/components/CollectionView/loadingMore/index.vue","webpack:///src/components/CollectionView/loadingMore/index.vue","webpack:///./src/components/CollectionView/loadingMore/index.vue?9e0f","webpack:///./src/components/CollectionView/loadingMore/index.vue?fc46","webpack:///src/components/CollectionView/tsVirtualCollectionView.vue","webpack:///./src/components/CollectionView/tsVirtualCollectionView.vue?6a0b","webpack:///./src/components/CollectionView/tsVirtualCollectionView.vue?6de4","webpack:///./src/mixins/reactive/resizeMixin.ts","webpack:///src/views/Home/Home-item.vue","webpack:///./src/views/Home/Home-item.vue?ddc5","webpack:///./src/views/Home/Home-item.vue?dc7a","webpack:///src/views/Home/index.vue","webpack:///./src/views/Home/index.vue?2dce","webpack:///./src/views/Home/index.vue?ee04","webpack:///./src/views/Home/Home-item.vue?4fe5","webpack:///./src/components/CollectionView/loadingMore/index.vue?0bf3","webpack:///./src/components/CollectionView/tsVirtualCollectionView.vue?2b56","webpack:///./src/views/Home/index.vue?0846","webpack:///./src/components/CollectionView/drag/swipeChooseOp.vue?8456","webpack:///./src/constants/noviceGuide.ts","webpack:///./src/mixins/noviceGuideMixin.ts"],"names":["root","factory","module","exports","this","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Component","_extends","assign","target","arguments","length","source","key","_GroupManager","_GroupManager2","_interopRequireDefault","obj","default","_toConsumableArray","arr","Array","isArray","arr2","from","props","cellSizeAndPositionGetter","type","Function","required","collection","height","Number","validator","width","sectionSize","containerPaddingBottom","scrollToBottomRange","headerSlotHeight","data","inRangeHit","totalHeight","totalWidth","displayItems","watch","resetCollection","created","groupManagers","onCollectionChanged","methods","forEach","manager","dispose","_this","undefined","group","groupContainer","groupIndex","unwatch","$watch","onGroupChanged","deep","push","updateGridDimensions","flushDisplayItems","Math","max","apply","map","it","index","updateGroup","getComputedStyle","displayItem","groupManager","cellMetadatum","getCellMetadata","itemIndex","x","y","transform","onScroll","event","total","scrollHeight","offsetHeight","scrollTop","$emit","onContainerResized","_this2","scrollLeft","$refs","outer","indices","getCellIndices","freeze","getItem","window","requestAnimationFrame","$forceUpdate","mounted","ResizeObserver","resizeObserver","observe","addEventListener","beforeDestroy","disconnect","removeEventListener","computed","containerStyle","outerStyle","_createClass","defineProperties","descriptor","writable","Constructor","protoProps","staticProps","_SectionManager","_SectionManager2","_classCallCheck","instance","TypeError","GroupManager","groupId","_groupId","_sectionSize","_cellSizeAndPositionGetter","_unwatch","sectionManager","item","registerCell","bottom","right","freezeCells","_group","_sectionManager","region","Section","_ref","_indexMap","_indices","_ref2","_Section","_Section2","SECTION_SIZE","SectionManager","_cellMetadata","_sections","frozenCellMetadatum","getSections","section","addCellIndex","sectionXStart","floor","sectionXStop","sectionYStart","sectionYStop","sections","sectionX","sectionY","keys","_ref3","_VirtualCollection","_VirtualCollection2","plugin","install","Vue","component","list","toString","result","join","mediaQuery","alreadyImportedModules","id","rawScriptExports","compiledTemplate","scopeId","cssModules","esModule","scriptExports","options","render","staticRenderFns","_scopeId","create","_vm","_h","$createElement","_c","_self","ref","staticClass","style","on","$event","_t","_v","_l","content","locals","hasDocument","document","DEBUG","Error","listToStyles","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","isOldIE","navigator","test","userAgent","toLowerCase","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","createStyleElement","styleElement","createElement","appendChild","update","remove","querySelector","parentNode","removeChild","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","css","media","sourceMap","parentId","_isProduction","newList","mayRemove","replaceText","textStore","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","sources","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","newStyles","part","_setupProxy","isLeave","_e","preventDefault","stopPropagation","onDropHanlderWrap","onDropOverHanlderWrap","selectedAll","attrs","edgSet","collectionViewSize","projectList","itemSize","column","lineSpace","onScrolledToBottomRange","scopedSlots","_u","fn","marginTop","titleEdgSet","top","marginLeft","left","marginRight","marginBottom","proxy","padding","onAddProjectClick","_s","class","dragToWhichItem","isSelected","nativeOn","handleStopMove","ctrlKey","shiftKey","altKey","metaKey","onLeftMouseClick","onCommandLeftMouseClick","onLeftMouseShiftClick","projectClickHandler","handleNodeContextmenu","onDropHanlder","getTransFormedDropPaths","onDropOverHanlder","onDropLeaveHanlder","projectIcon","thumbnailCounts","require","_f","update_time","onAddedProjectCallback","model","showResetProjectName","callback","$$v","expression","importFilePaths","importProgress","status","myImportName","handleCancelImport","showImportProgress","showRenameDialog","inputRenameText","onRenameConfirm","deleteProgress","showDeleteProgress","visible","handleNameChange","indexOf","_k","keyCode","submit","form","$set","loading","mixins","components","ifInconClose","filters","handler","immediate","cake_operate","message","newProjectInfo","batchDeleteProjects","defineComponent","deleteProgressDialog","setup","PointHomeItem","useHomeItemPointsRepositories","DeleteProgressStatus","Start","over","onShowDeleteDialog","val","unregisterShortcut","registerShortcut","mapActions","ACT_DeleteProject","deleteProjectCache","selectProjects","delete","tsConfirm","title","customMessageStyle","then","async","Deleting","onDeleteProject","deleteRemoteProject","loadNext","DeleteOver","catch","e","console","error","RequestDeleteError","_","log","cloneMap","aNewMap","Map","set","thumbIds","findImageIdsByProjectId","imageIds","deleteThumbnailIds","items","lastError","size","promiseList","copiedItems","Promise","all","deleteRemoteProjects","count","min","lazyLoadObj","singlePageCount","reject","projectIds","batchDeleteProject","batchRemove","h","customTitleEl","numStyle","onBatchDeleteProjects","clear","directives","rawName","isDown","rect","w","getRect","point0","point1","rectGetMaxY","rc","rectGetMaxX","rectGetMinX","rectGetMinY","Direction","None","Down","Up","mozRequestAnimationFrame","cancelAnimationFrame","mozCancelAnimationFrame","extend","acceptEl","eventEl","canMouseDown","isCustomScroll","outRect","startPoint","endPoint","rStartPoint","rEndPoint","isMoved","offsetPosY","scrollTimer","intervalY","scrollDirection","constScrollHeight","speed","lastDownTime","getEventEl","installSwipeEvents","capture","passive","removeSwipeEvents","transformXY","clientX","clientY","offsetY","pointInside","point","ret","onResize","onMouseDown","onMouseMove","onMouseUp","getOffsetClient","offY","getAcceptEl","onScroller","topY","next","startTimer","stopTimer","checkScrollState","ofY","diffTop","reset","SwipeChoose","$swipeChooseShow","parentEl","SwipeChooseOpConstructor","swipeChooseOp","propsData","$mount","$el","isRectIntersect","rect0","rect1","minX","maxX","diffX","abs","minY","maxY","diffY","maxW","maxH","use","SwcPlugin","batchSelectsProject","lastSelectedIndex","swipeChooseRef","canMouseDragSelection","allProjects","isOnDragMouseDown","findNextProjectIndex","projects","proj","forceUpdate","installShortcuts","registerMouseSelectEvents","removeShortcuts","ipcRenderer","args","removeItem","send","removeAllListeners","activeShortcut","isActive","selected","setSelected","clearSelects","project","idx","projectIndex","lastIndex","nextIndex","isMeta","$isWin","$isMac","projIndex","setSelectItemsInRect","virtualCollectionRef","nextNodes","$children","projectVmItems","projectVmItem","bounds","getBoundingClientRect","itemBounds","isIntersect","projectId","$vnode","closeContextMenu","$props","onContextMenuItemClick","action","showContextMenu","addSwipeChooseComponent","that","$on","loadingStatus","overflowX","showHorizontalSlider","myItems","bottomNearDistance","slot","constLoadingStatus","totalEnd","up","down","none","columns","contentEdgeSet","vertical","horizontal","scrollMeasure","lastScrollTop","loadingMoreRef","arys","installLoadingMore","canScroll","showLoadingMore","triggerBottomEvent","onScrollEvent","listenScrollEvents","windowSize","resetWindowSize","getClientWidth","getClientHeight","onWindowResize","listenWinSize","isNeed","fileProtocol","workSpacePath","fileExistMap","tsFileImport","resizeMixin","noviceGuideMixin","TsVirtualCollectionView","optProjectDialog","ImportProgressDialog","renameProjectDialog","isLeft","iconParam","iconPath","iconExist","isExist","PointClickProject","CLIENT_NAME","clickTimer","exportTimer","loadingEl","fileNameChangeFlagIndex","chooseItem","ratio","pageCount","filterFormatName","showCancelButton","confirmButtonText","err","rowUpdateTime","userId","forceReload","beforeMount","lastRowUpdateTime","dropPathArray","resetCollectionViewDisplayItems","modify","visit_time","projectNameEl","loadError","goNext","isNoSpace","routeName","query","onImportFileClick","lock","text","background","path","thumbnailPaths","importTimes","thumbnailNumber","isProjectExist","res","getProjectNameElByIndex","menu","label","disabled","progress","convertDataTransferFiles","paths","HomeView","noviceGuide","totalStep","step1","num","step2","step3","step4","step5","step6","noviceGuideUtil","constructor","actionableStyle","bgStyle","addMask","myBg","body","addActionable","className","myAlert","getElementsByClassName","removeMask","showGuide","step","close","tempStep1","template","tempStep2","tempStep3","tempStep4","tempStep5","tempStep6","guidMask","tempDiv","toast","pointsMixin","mapGetters","mapMutations","$nextTick","isShowNoviceGuide","_SetGuideStep","PointInitGuide","find","SHOWED_NOVICE_GUIDE","DBIpcRender","insertToDB","DICTIONARY_TABLE","keyword","APP_VERSION","commonMountFunc","quiteNode","getElementById","allGuideQuit","node","removeAttribute","myTemp","guideQuit","_SetIsShowNoviceGuide","PointClickQuit"],"mappings":"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,SAASG,EAAYH,GACrB,WAKA,MAAMI,EAAY,CAClBC,QACAC,OACAC,MAEA,IAAIlV,EAAwBD,OAAOC,uBAAyBD,OAAOoV,0BACnEpV,mEACIqV,EAAuBrV,OAAOqV,sBAAwBrV,OAAOsV,wBAElD,mBAAIC,OAAO,CAC1Blc,qBACAmC,OACAga,UACA9Z,YACAvC,OAAA,UAEAsc,SACA/Z,iBACAvC,YAGAuc,cACAha,aACAvC,UAGAwc,gBACAja,aACAvC,WAGAwD,OACA2X,QACA,mDACA,OAEA,gBACA,sBACAsB,sCAEA,oDAEAF,gBACA,IACA,kBAIApZ,OACA,OAEAuZ,gBACAC,cAEAC,iBACAC,eAGA3B,UACA4B,WACAC,aACA5B,MACAzV,IACAC,IACAyV,IACAT,KAEAqC,iBACAC,YACAC,uBACAC,uBACAC,QACAC,oBAGAxZ,SACAyZ,aACA,+CAEAC,qBACA,wBACA,kEAAAC,WAAAC,aACAnB,iDACAA,6CACAA,4CAEAoB,oBACA,wBACA,wEACApB,oDACAA,gDACAA,+CAEAqB,eACA,YAAAC,UAAAC,GAAA,EACA,IACA,oBAKA,OAJA,sBAEAC,kDAEA,CACApY,IACAC,MAMAoY,eACA,SACA,sBACA,kCACA,+BACA,iCACA,gCAEA,GACArY,IACAC,IACAyV,IACAT,KAaA,OAVAqD,WAEAA,WAEAA,WAEAA,YAEAC,MAEA,GAEAC,YACA,cAEAC,eACA,uCACA,oCACA,sBACA,sCACA,kDAEA,8BAAA/C,IAAAT,KACA,gCACA,gBACA,kBAEAyD,eACA,2BACA,2BAEA,YACA,qBACA,OAEAtF,iDACA,gBACA,0BACA,gBACA,sBACA,sBACA,gDAEA,uCACA,YACA,0BAEAuF,aAEA,GADA,wCACA,YACA,OAEA,eACA,gBACA,kCACA,uCACA,YACA,kBAEA,eACA,2BAIAC,mBACA,QACA,IACA,+BACAC,eAEA,UAEAC,cACA,kDAEAC,aACA,gCACA,OAEA,gEACAxB,cACA,qCACA,yBACA,kCACA,QACA,OACA/W,KAEA,QACA,sBACAwY,gDAEA,eAAAhZ,kBAAAC,KACA,kCAGA,QACA,UACA,OA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KACA,WACA,OAIa,M,QCWfmE,aAAIA,IAAIA,MAER,MAAM+R,GAAkB,CACxBkH,KACAC,OACAC,SAIe,QACfpkB,kCACAqW,gBACAlU,OACAsX,OACApX,WACAT,mBACA,WAGAa,QACAJ,YACAT,WAEAgB,OACAP,YACAT,WAEAsQ,UACA7P,YACAT,mBACA,OACAgB,SACAH,aAKA4hB,SACAhiB,YACAT,WAEA0iB,gBACAjiB,YACAT,mBACA,OACA+Q,MACAE,OACA/J,SACAC,WAIAqJ,WACA/P,YACAT,mBACA,OACA2iB,WACAC,gBAIAZ,sBACAvhB,aACAT,aAGAqB,OACA,OACA6gB,sBACAD,WAEAY,eACAC,gBACA1H,yBAEA0G,sBACAiB,sBAGArhB,OACA+gB,aAGA5K,OACAhD,oBACA,SACA,IACA,iBACAmO,QACA3hB,MACAA,OACA+B,WAGAvF,IAGA,gBAEAiX,cAEAgN,eACAjN,sBAGAC,eAGA5P,UACA,4BACA,kCAAA4c,4BAEAvc,gBAEA,8CACA,yBACA,6BAEAxD,SACAkhB,wBACA,8BACA,cACA,CACAxF,mBACAC,SAGA,OAFAJ,qBACA,sBACA,GAEA4F,YACA,eACA,MACA,SAEA,qEACA,UAEAC,mBACA,qBACA,2CACA,uBAEA,+DAEAC,uDACA,8CACA,KACAC,iBACA,iBACA,gCACA,kBACA,2CAEA,mCADA,IACA,QAEA,MAEArM,uKACA,uCACA,8CACA,2BAGA,oCAEAsM,sBACA,eACA,EACA,GACA/I,gDAGA,GACAA,sCAIA/Z,+BACA,mCACA,6BACA,oCACA,kCACA,sBACA,uBACA,OACAoD,mCACAC,UACA7C,0BACAH,6BAEA,YC5NgX,MCQ5W,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCfAwI,gBAAIiR,OAAO,CACtBjZ,OACI,MAAO,CACHkiB,WAAY,CACRviB,MAAO,EACPH,OAAQ,KAIpBkB,QAAS,CACLyhB,kBACIhmB,KAAK+lB,WAAa,CACdviB,MAAOyiB,iBACP5iB,OAAQ6iB,mBAGhBC,iBACInmB,KAAKgmB,mBAETI,cAAcC,GACNA,EACA9e,OAAOO,iBAAiB,SAAU9H,KAAKmmB,gBAEvC5e,OAAOU,oBAAoB,SAAUjI,KAAKmmB,kBAItDze,UACI1H,KAAKgmB,kBACLhmB,KAAKomB,eAAc,IAEvBre,gBACI/H,KAAKomB,eAAc,M,oHCsK3B,IAAIE,GAA6D,OAC7DC,GAAgB,KAChBC,GAAe,IAAIzM,IAER,oCAAgB,CAC/B9C,eACAwP,OACAvF,GAAAxJ,EAAAgP,GAAAC,SACAzP,YACA0P,2BACA,oBACAC,mBACAC,4BACAC,2BACA,eACAhkB,OACAikB,UACAC,WACAhkB,YACAT,mBACA,OACA0S,iBACAtP,eAKA/B,OACA,OACAqjB,cACAC,iBAGAjjB,OACA,WACAmT,oBACA,gCAGAC,eAGA/S,SACA,oBACA,kBAAA2Q,QAAAtP,GAAA,eACA,MACA,YAEA,WACA,MACA,YAEA,SAEA,MAEA,sBACA,kBACA,cAGA,qBACA,SAIA,KACA2gB,kCACA,mBACAA,UAGA,aACA,gBAOA,QALA,kBACAa,8BACAZ,aAEA,iBACA,gBACA,gDACA,gBAEA,uBAGA3Z,mBACA,qBAGA,eACA,+EAEA,2EACA,UADA,MACA,kCADA,eALA,UASA,sBACA,sBAIAgL,QACA,wBAAAwP,gBAAAvP,GAAA,iBAEA,OACAuP,oBACAvP,kBAGAjU,OACA,OACAyjB,mBACAnV,WACAiE,qBACAmR,gBACAC,iBACA/R,wBACAgS,eACAC,6BACAC,cACAzR,sBACAC,oBACAL,kBACA7B,qBACArB,oBAAApP,QAAAH,UACAyP,UAAAtP,UAAAH,YACA0P,SAEAgI,aACA6M,QACAC,YACA7M,mBAEArI,QAAAY,OAAA7J,UAAAC,SAAA8J,UACAH,aAAAC,OAAA7J,UAAAC,SAAA8J,UACAT,WACAmS,YACAC,eAEAvP,qBAGAuB,SACA0Q,yBAEA,gBAEA,gDACAtO,+CACA,aACA,gBACAX,WACAyC,oFACAxC,qCACAiP,oBACAC,yBACA1O,MAAA2O,IAAAzO,iBAIA,sDACA,+CACA,uCACA,qDACA0O,mBACAL,uCACA9O,KAAA,KACA,qCAGA,wBAEA,oCACA,sBAAAoP,SAAAC,uBAGA,uBAEA,+BAKA,iCAEAC,gBAGAtgB,gBACAye,WACA,6BACA,wBAEAte,aACA,0BACA,WACA,yBAEA,gBACA,cAEA,yBACA,oBACA,qBAEA2K,cACA,iCACA,MACA,oBAEA,OADA2G,uCACA,aAEA8O,oBACA,sBACA,oBACA,OAEA,gCACA,uBAGA,gBACA,yBACA,sCAEA,mCACA,GACA,4BAEA,OAGApkB,OAEA6hB,YACA1O,kDACA,6CACA,kDACA,GACAC,cAEAnB,kBACAkB,sBAEA,EACA,0BAEA,yBAGAC,cAEA7B,sBACA4B,sBAEA,EACA,0BAEA,yBAGAC,eAGA/S,YACA,gEACA,2CAEA,kDAEA,mFACA,sDAEA,0BACA,oBACA,oBACA,yBAGA,4BACA,sBAEAwQ,0BACA,wBACA,KACA,iBACAwT,eAEA,UAEAC,kCACA,0CACA,MACA,OAEA,kDAGA,WACA,yBACA,mEACA,wCACA,sEACA,iDACA,6CACAhP,qFACA,eAEA,yBACA,wBAKA,YAJA,eACAvW,aACAuU,sBAIA,sDAGA,cAGA,OAFA,uCACA,gCAKA,wBACAnL,QACAoc,QACAC,qBACA9nB,UAIA,mEACA+nB,8BACA,kCACA,yBACA,eACAnR,oBAGApD,kBACAmF,oBAEAqP,YACApP,yBAEAjE,0BACA,sBACA,WACA,0BAEAzB,oBAEA,0BACA,OAEA,gBACA,mCACA,GACA,6BACA,uCAKA,eACA7Q,aACAuU,mBAIA,qCACAqR,MACA9P,KAAA+P,IACA,GACAD,OAMAjU,2BACA,gBACA,+CACA,yBACA,4CAMA,+CACA,+BACA,yBACA,2CAKA,OAIA,0BACA,wBACA,YAWA,MAVA,qCACA,6CACA,wBACAvI,QACAoc,QACAC,wBAMA,SAIAK,EAFA,wBACA,gCACAA,UAEAA,uBAGAA,UAGA,gBACA,mBACAnoB,OACAooB,OACApjB,WACA,MAMAqjB,qBACA,gBACApQ,aACArB,8BACAuQ,sBACAhP,KAAAY,IAEA,8BACAuP,QACAC,iBACAC,kCAEA,uBACA,gCACA,iBACA,uBACA,qBAEA,mBACAxoB,eACAooB,OACApjB,aAGA0T,MAAAC,IACA,iBACA,uBACA,qBAEAC,sBAIA,sBACA,UAEA,6CACA,4BACA,CACAnN,QACAgd,UACAC,oBACAC,cACAC,oBAIA,2BACA,SAEA,OADAhQ,iBACA,oBAGAiQ,kBACA,kCACA,SAEA,SACA,gCACA,kCAEA,OADAC,KACA,EAGA,UAGA,sCACA,iBAGA,kBACA,yCACA,MACA,8DAEA,IACA,6BACA,aAOA,GANAvG,2BACA,qDACA+E,qCACAL,0CAEA9R,qDACA,iBACA,kEACA,IACAA,eAGAyD,gFACA2J,qBACA,SACA3J,qDAIAmQ,2BACA,oCACA,YAEA,kEACA,MACA,YAEA,wDACA,UAMA,iCACA,wCACA,kEACA,qBAEA,CACA,uBACA,oBACA,6BACAC,QACAC,YACA5F,8BACA6F,YACAjmB,OACA6R,aACA,4BACA,yBACA,kCAOA,2BACAkU,QACAC,aACA5F,oCACA6F,YACAjmB,yBACA6R,4BAKAkU,QACAC,WACA5F,8BACA6F,YACAjmB,OACA6R,uBAIAkU,WACA,mCAKA5U,qBACA,wBAEAC,sBACA,2BAEAH,4DAEA,aACA,QACAtL,mBACAA,mCAEA,6BACA,OAEA,KACA,OAEA,mBACA,qCACA,6CACA,gCAIA,gCACA,uBAGA,mBACA5I,4BACAooB,OACA,iBACA,0BACA,gBACA,kBAGAe,IAEA,0BACA,4BAEA,yCACA,8CAEA,0BAGA,KAGAvX,wBACA,oBAEAwX,4BACA,eACA,SACA,gBACA,aACAC,UAEA,UAEA,2BACA,gBACA,yBACA,0BACA,OAGA,IAEA,wBACA,uBAEA,UACA,SACA,gBACA,aACAA,UAGA,6CACA,gBAEA,YADA,mCAGA,2BACA,gCAEA,kBACA,4BACA,iBACA,YACA,MACA,sCACArpB,kBAEA,uCAEA,GADA6W,kCACA,qBACA,OAEA,SACA,IACAgL,kCACA,SACA,eACAxf,aACAuU,oBAKA,SAEA,YADA,4BAIA,wBAEA,kBADA,gCAIA,QACA,0BACA,SACA,eACAvU,aACAuU,uBAKA,2BAEA,qCACAqR,OACA9P,KAAA+P,IACA,GACAD,OAGA,kCC17BkW,MCQ9V,I,U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","file":"js/chunk-d650e566.9fac4b6d.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vue-virtual-collection\"] = factory();\n\telse\n\t\troot[\"vue-virtual-collection\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(10)\n\nvar Component = __webpack_require__(8)(\n  /* script */\n  __webpack_require__(1),\n  /* template */\n  __webpack_require__(9),\n  /* scopeId */\n  \"data-v-75486378\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _GroupManager = __webpack_require__(2);\n\nvar _GroupManager2 = _interopRequireDefault(_GroupManager);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } } //\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexports.default = {\n    props: {\n        cellSizeAndPositionGetter: {\n            type: Function,\n            required: true\n        },\n        collection: {\n            type: Array,\n            required: true\n        },\n        height: {\n            type: Number,\n            required: true,\n            validator: function validator(value) {\n                return value >= 0;\n            }\n        },\n        width: {\n            type: Number,\n            required: true,\n            validator: function validator(value) {\n                return value >= 0;\n            }\n        },\n        sectionSize: {\n            type: Number,\n            default: 300\n        },\n        containerPaddingBottom: {\n            type: Number,\n            default: 0\n        },\n        scrollToBottomRange: {\n            type: Number\n        },\n        headerSlotHeight: {\n            type: Number,\n            default: 0\n        }\n    },\n    data: function data() {\n        return {\n            inRangeHit: false,\n            totalHeight: 0,\n            totalWidth: 0,\n            displayItems: []\n        };\n    },\n\n    watch: {\n        collection: function collection() {\n            this.resetCollection();\n        }\n    },\n    created: function created() {\n        this.groupManagers = [];\n        this.onCollectionChanged();\n    },\n\n    methods: {\n        resetCollection: function resetCollection() {\n            // Dispose previous groups and reset associated data\n            this.groupManagers.forEach(function (manager) {\n                return manager.dispose();\n            });\n            this.groupManagers = [];\n            this.totalHeight = 0;\n            this.totalWidth = 0;\n\n            this.onCollectionChanged();\n        },\n        onCollectionChanged: function onCollectionChanged() {\n            var _this = this;\n\n            var collection = this.collection;\n\n            // If the collection is flat, wrap it inside a single group\n            if (collection.length > 0 && collection[0].group === undefined) {\n                collection = [{ group: collection }];\n            }\n\n            // Create and store managers for each item group\n            collection.forEach(function (groupContainer, i) {\n                var groupIndex = i; // Capture group index for closure\n                var unwatch = _this.$watch(function () {\n                    return groupContainer;\n                }, function () {\n                    return _this.onGroupChanged(groupContainer.group, groupIndex);\n                }, { deep: true });\n\n                _this.groupManagers.push(new _GroupManager2.default(groupContainer.group, groupIndex, _this.sectionSize, _this.cellSizeAndPositionGetter, unwatch));\n            });\n\n            this.updateGridDimensions();\n            this.flushDisplayItems();\n        },\n        updateGridDimensions: function updateGridDimensions() {\n            this.totalHeight = Math.max.apply(Math, _toConsumableArray(this.groupManagers.map(function (it) {\n                return it.totalHeight;\n            })));\n            this.totalWidth = Math.max.apply(Math, _toConsumableArray(this.groupManagers.map(function (it) {\n                return it.totalWidth;\n            })));\n        },\n        onGroupChanged: function onGroupChanged(group, index) {\n            this.groupManagers[index].updateGroup(group);\n            this.updateGridDimensions();\n            this.flushDisplayItems();\n        },\n        getComputedStyle: function getComputedStyle(displayItem) {\n            if (!displayItem) return;\n\n            // Currently displayed items may no longer exist\n            // if collection has been modified since\n            var groupManager = this.groupManagers[displayItem.groupIndex];\n            if (!groupManager) return;\n\n            var cellMetadatum = groupManager.getCellMetadata(displayItem.itemIndex);\n            if (!cellMetadatum) return;\n\n            var width = cellMetadatum.width,\n                height = cellMetadatum.height,\n                x = cellMetadatum.x,\n                y = cellMetadatum.y;\n\n            return {\n                transform: \"translateX(\" + x + \"px) translateY(\" + y + \"px)\",\n                width: width + \"px\",\n                height: height + \"px\"\n            };\n        },\n        onScroll: function onScroll(event) {\n            this.flushDisplayItems();\n            var target = event.target;\n            var total = target.scrollHeight - target.offsetHeight;\n            if (target.scrollTop === 0) {\n                this.$emit(\"scrolled-to-top\", target);\n            } else if (target.scrollTop === total) {\n                this.$emit(\"scrolled-to-bottom\", target);\n            } else if (this.scrollToBottomRange) {\n                if (target.scrollTop < total && target.scrollTop > total - this.scrollToBottomRange) {\n                    if (this.inRangeHit === false) {\n                        this.inRangeHit = true;\n                        this.$emit(\"scrolled-to-bottom-range\", target);\n                    }\n                } else {\n                    this.inRangeHit = false;\n                }\n            }\n        },\n        onContainerResized: function onContainerResized() {\n            this.resetCollection();\n        },\n        flushDisplayItems: function flushDisplayItems() {\n            var _this2 = this;\n\n            var scrollTop = 0;\n            var scrollLeft = 0;\n            if (this.$refs.outer) {\n                scrollTop = this.$refs.outer.scrollTop - this.headerSlotHeight;\n                scrollLeft = this.$refs.outer.scrollLeft;\n            }\n\n            var displayItems = [];\n            this.groupManagers.forEach(function (groupManager, groupIndex) {\n                var indices = groupManager.getCellIndices({\n                    height: _this2.height,\n                    width: _this2.width,\n                    x: scrollLeft,\n                    y: scrollTop\n                });\n\n                indices.forEach(function (itemIndex) {\n                    displayItems.push(Object.freeze(_extends({\n                        groupIndex: groupIndex,\n                        itemIndex: itemIndex,\n                        key: displayItems.length\n                    }, groupManager.getItem(itemIndex))));\n                });\n            });\n\n            if (window.requestAnimationFrame) {\n                window.requestAnimationFrame(function () {\n                    _this2.displayItems = displayItems;\n                    _this2.$forceUpdate();\n                });\n            } else {\n                this.displayItems = displayItems;\n                this.$forceUpdate();\n            }\n        }\n    },\n    mounted: function mounted() {\n        if (ResizeObserver) {\n            this.resizeObserver = new ResizeObserver(this.onContainerResized);\n            this.resizeObserver.observe(this.$refs.outer);\n        } else {\n            this.$refs.outer.addEventListener(\"resize\", this.onContainerResized);\n        }\n    },\n    beforeDestroy: function beforeDestroy() {\n        if (ResizeObserver) {\n            this.resizeObserver.disconnect();\n        } else {\n            this.$refs.outer.removeEventListener(\"resize\", this.onContainerResized);\n        }\n    },\n\n    computed: {\n        containerStyle: function containerStyle() {\n            return {\n                height: this.totalHeight + this.containerPaddingBottom + \"px\",\n                width: this.totalWidth + \"px\"\n            };\n        },\n        outerStyle: function outerStyle() {\n            return {\n                height: this.height + \"px\",\n                width: this.width + \"px\"\n            };\n        }\n    }\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _SectionManager = __webpack_require__(4);\n\nvar _SectionManager2 = _interopRequireDefault(_SectionManager);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/** Represents a group of logically-related items */\nvar GroupManager = function () {\n    function GroupManager(group, groupId, sectionSize, cellSizeAndPositionGetter, unwatch) {\n        _classCallCheck(this, GroupManager);\n\n        this._groupId = groupId;\n        this._sectionSize = sectionSize;\n        this._cellSizeAndPositionGetter = cellSizeAndPositionGetter;\n        this._unwatch = unwatch;\n        this.totalHeight = 0;\n        this.totalWidth = 0;\n        this.updateGroup(group);\n    }\n\n    _createClass(GroupManager, [{\n        key: \"updateGroup\",\n        value: function updateGroup(group) {\n            var _this = this;\n\n            var sectionManager = new _SectionManager2.default(this._sectionSize);\n            var totalHeight = 0;\n            var totalWidth = 0;\n\n            group.forEach(function (item, index) {\n                var cellMetadatum = _this._cellSizeAndPositionGetter(item, index, _this._groupId);\n                sectionManager.registerCell({\n                    index: index,\n                    cellMetadatum: cellMetadatum\n                });\n\n                // compute total height and total width\n                var x = cellMetadatum.x,\n                    y = cellMetadatum.y,\n                    width = cellMetadatum.width,\n                    height = cellMetadatum.height;\n\n                var bottom = y + height;\n                var right = x + width;\n                if (bottom > totalHeight) {\n                    totalHeight = bottom;\n                }\n                if (right > totalWidth) {\n                    totalWidth = right;\n                }\n            });\n\n            sectionManager.freezeCells();\n\n            this._group = group;\n            this._sectionManager = sectionManager;\n            this.totalHeight = totalHeight;\n            this.totalWidth = totalWidth;\n        }\n    }, {\n        key: \"getCellIndices\",\n        value: function getCellIndices(region) {\n            return this._sectionManager.getCellIndices(region);\n        }\n    }, {\n        key: \"getCellMetadata\",\n        value: function getCellMetadata(index) {\n            return this._sectionManager.getCellMetadata(index);\n        }\n    }, {\n        key: \"getItem\",\n        value: function getItem(index) {\n            return this._group[index];\n        }\n    }, {\n        key: \"dispose\",\n        value: function dispose() {\n            this._unwatch();\n        }\n    }]);\n\n    return GroupManager;\n}();\n\nexports.default = GroupManager;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * A section of the Window.\n * Window Sections are used to group nearby cells.\n * This enables us to more quickly determine which cells to display in a given region of the Window.\n * Sections have a fixed size and contain 0 to many cells (tracked by their indices).\n */\nvar Section = function () {\n    function Section(_ref) {\n        var height = _ref.height,\n            width = _ref.width,\n            x = _ref.x,\n            y = _ref.y;\n\n        _classCallCheck(this, Section);\n\n        this.height = height;\n        this.width = width;\n        this.x = x;\n        this.y = y;\n\n        this._indexMap = {};\n        this._indices = [];\n    }\n\n    /** Add a cell to this section. */\n\n\n    _createClass(Section, [{\n        key: \"addCellIndex\",\n        value: function addCellIndex(_ref2) {\n            var index = _ref2.index;\n\n            if (!this._indexMap[index]) {\n                this._indexMap[index] = true;\n                this._indices.push(index);\n            }\n        }\n\n        /** Get all cell indices that have been added to this section. */\n\n    }, {\n        key: \"getCellIndices\",\n        value: function getCellIndices() {\n            return this._indices;\n        }\n\n        /** Intended for debugger/test purposes only */\n\n    }, {\n        key: \"toString\",\n        value: function toString() {\n            return this.x + \",\" + this.y + \" \" + this.width + \"x\" + this.height;\n        }\n    }]);\n\n    return Section;\n}();\n\nexports.default = Section;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Section = __webpack_require__(3);\n\nvar _Section2 = _interopRequireDefault(_Section);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SECTION_SIZE = 600;\n\nvar SectionManager = function () {\n    function SectionManager() {\n        var sectionSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : SECTION_SIZE;\n\n        _classCallCheck(this, SectionManager);\n\n        this._sectionSize = sectionSize;\n\n        this._cellMetadata = [];\n        this._sections = {};\n    }\n\n    _createClass(SectionManager, [{\n        key: \"registerCell\",\n        value: function registerCell(_ref) {\n            var cellMetadatum = _ref.cellMetadatum,\n                index = _ref.index;\n\n            var frozenCellMetadatum = Object.freeze(cellMetadatum);\n            this._cellMetadata[index] = frozenCellMetadatum;\n\n            this.getSections(frozenCellMetadatum).forEach(function (section) {\n                return section.addCellIndex({ index: index });\n            });\n        }\n    }, {\n        key: \"freezeCells\",\n        value: function freezeCells() {\n            Object.freeze(this._cellMetadata);\n        }\n\n        /** Get all Sections overlapping the specified region. */\n\n    }, {\n        key: \"getSections\",\n        value: function getSections(_ref2) {\n            var height = _ref2.height,\n                width = _ref2.width,\n                x = _ref2.x,\n                y = _ref2.y;\n\n            var sectionXStart = Math.floor(x / this._sectionSize);\n            var sectionXStop = Math.floor((x + width - 1) / this._sectionSize);\n            var sectionYStart = Math.floor(y / this._sectionSize);\n            var sectionYStop = Math.floor((y + height - 1) / this._sectionSize);\n\n            var sections = [];\n\n            for (var sectionX = sectionXStart; sectionX <= sectionXStop; sectionX++) {\n                for (var sectionY = sectionYStart; sectionY <= sectionYStop; sectionY++) {\n                    var key = sectionX + \".\" + sectionY;\n\n                    if (!this._sections[key]) {\n                        this._sections[key] = new _Section2.default({\n                            height: this._sectionSize,\n                            width: this._sectionSize,\n                            x: sectionX * this._sectionSize,\n                            y: sectionY * this._sectionSize\n                        });\n                    }\n\n                    sections.push(this._sections[key]);\n                }\n            }\n\n            return sections;\n        }\n\n        /** Total number of Sections based on the currently registered cells. */\n\n    }, {\n        key: \"getTotalSectionCount\",\n        value: function getTotalSectionCount() {\n            return Object.keys(this._sections).length;\n        }\n\n        /**\n         * Gets all cell indices contained in the specified region.\n         * A region may encompass 1 or more Sections.\n         */\n\n    }, {\n        key: \"getCellIndices\",\n        value: function getCellIndices(_ref3) {\n            var height = _ref3.height,\n                width = _ref3.width,\n                x = _ref3.x,\n                y = _ref3.y;\n\n            var indices = {};\n\n            this.getSections({ height: height, width: width, x: x, y: y }).forEach(function (section) {\n                return section.getCellIndices().forEach(function (index) {\n                    indices[index] = index;\n                });\n            });\n\n            // Object keys are strings; this function returns numbers\n            return Object.keys(indices).map(function (index) {\n                return indices[index];\n            });\n        }\n    }, {\n        key: \"getCellMetadata\",\n        value: function getCellMetadata(index) {\n            return this._cellMetadata[index];\n        }\n    }]);\n\n    return SectionManager;\n}();\n\nexports.default = SectionManager;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _VirtualCollection = __webpack_require__(0);\n\nvar _VirtualCollection2 = _interopRequireDefault(_VirtualCollection);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar plugin = {\n    install: function install(Vue) {\n        Vue.component(\"VirtualCollection\", _VirtualCollection2.default);\n    }\n};\n\nexports.default = plugin;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(7)();\n// imports\n\n\n// module\nexports.push([module.i, \".vue-virtual-collection[data-v-75486378]{overflow:scroll;-webkit-overflow-scrolling:touch}.vue-virtual-collection-container[data-v-75486378]{position:relative}.vue-virtual-collection .cell-container[data-v-75486378]{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n// this module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  scopeId,\n  cssModules\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  // inject cssModules\n  if (cssModules) {\n    var computed = Object.create(options.computed || null)\n    Object.keys(cssModules).forEach(function (key) {\n      var module = cssModules[key]\n      computed[key] = function () { return module }\n    })\n    options.computed = computed\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: \"outer\",\n    staticClass: \"vue-virtual-collection\",\n    style: (_vm.outerStyle),\n    on: {\n      \"&scroll\": function($event) {\n        return _vm.onScroll($event)\n      }\n    }\n  }, [_vm._t(\"header\"), _vm._v(\" \"), _c('div', {\n    staticClass: \"vue-virtual-collection-container\",\n    style: (_vm.containerStyle)\n  }, _vm._l((_vm.displayItems), function(item) {\n    return _c('div', {\n      key: item.key,\n      staticClass: \"cell-container\",\n      style: (_vm.getComputedStyle(item))\n    }, [_vm._t(\"cell\", null, {\n      \"data\": item.data\n    })], 2)\n  }), 0)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(6);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(11)(\"5a98f0ed\", content, true);\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\nvar listToStyles = __webpack_require__(12)\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nmodule.exports = function (parentId, list, _isProduction) {\n  isProduction = _isProduction\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[data-vue-ssr-id~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\n/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nmodule.exports = function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n/***/ })\n/******/ ]);\n});\n//# sourceMappingURL=index.js.map","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"home-index\"},[_c('home-view')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return (!_vm.isLeave)?_c('div',{staticClass:\"home-item global__scroll-style\",on:{\"drop\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onDropHanlderWrap($event)},\"dragover\":function($event){$event.preventDefault();$event.stopPropagation();},\"dragenter\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onDropOverHanlderWrap()},\"click\":function($event){return _vm.selectedAll(false)}}},[_c('div',{ref:\"projectContainerRef\",staticClass:\"project-container guideClass1\"},[_c('ts-virtual-collection-view',{ref:\"virtualCollectionRef\",attrs:{\"content-edge-set\":_vm.edgSet,\"width\":_vm.collectionViewSize.width,\"height\":_vm.collectionViewSize.height,\"items\":_vm.projectList,\"item-size\":_vm.itemSize,\"columns\":_vm.column,\"line-space\":_vm.lineSpace},on:{\"scrolled-to-bottom-range\":_vm.onScrolledToBottomRange},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h3',{staticClass:\"title c-text-primary\",style:({\n            marginTop:`${_vm.titleEdgSet.top}px`,\n            marginLeft:`${_vm.titleEdgSet.left}px`,\n            marginRight:`${_vm.titleEdgSet.right}px`,\n            marginBottom:`${_vm.titleEdgSet.bottom}px`\n        }),attrs:{\"id\":\"aaaaaaa\"}},[_vm._v(\"全部项目\")])]},proxy:true},{key:\"default\",fn:function({data}){return [(data.item.type === 0)?[_c('el-card',{key:data.index,staticClass:\"box-card\",attrs:{\"shadow\":\"hover\",\"title\":data.item.name,\"body-style\":{ padding: '0px' }}},[_c('div',{staticClass:\"add-project c-text-primary\",on:{\"click\":function($event){$event.stopPropagation();return _vm.onAddProjectClick()}}},[_c('i',{staticClass:\"el-icon-plus add-btn\"}),_c('p',{staticClass:\"add-name\"},[_vm._v(_vm._s(data.item.name))])])])]:[_c('el-card',{key:data.index,ref:\"projectCardRef\",class:{ 'box-card':true, 'box-card-hover':data.index == _vm.dragToWhichItem ,'box-card-selected':_vm.isSelected(data.item)},attrs:{\"id\":data.item.id,\"shadow\":\"hover\",\"title\":data.item.name,\"body-style\":{ padding: '0px' }},nativeOn:{\"mousedown\":function($event){return _vm.handleStopMove.apply(null, arguments)},\"click\":[function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey)return null;$event.stopPropagation();return _vm.onLeftMouseClick(data.item,data.index)},function($event){if(!$event.metaKey)return null;$event.stopPropagation();return _vm.onCommandLeftMouseClick(true,data.item,data.index)},function($event){if(!$event.ctrlKey)return null;$event.stopPropagation();return _vm.onCommandLeftMouseClick(false,data.item,data.index)},function($event){if(!$event.shiftKey)return null;$event.stopPropagation();return _vm.onLeftMouseShiftClick(data.item,data.index)}],\"dblclick\":function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey)return null;$event.stopPropagation();return _vm.projectClickHandler(data.index, data.item, 'dblclick')},\"contextmenu\":function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey)return null;return _vm.handleNodeContextmenu(data.index,data.item)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();_vm.onDropHanlder(_vm.getTransFormedDropPaths(),data.index,data.item)},\"dragover\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onDropOverHanlder(data.index)},\"dragenter\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onDropOverHanlder(data.index)},\"dragleave\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onDropLeaveHanlder(data.index)}}},[(data.item.projectIcon && data.item.projectIcon.length >0)?[_c('div',{staticClass:\"custom-image\"},[(data.item.projectIcon.length === 1)?[_c('render-icon',{attrs:{\"icon-param\":{projectIcon:data.item.projectIcon,index:0}}})]:(data.item.projectIcon.length === 2)?[_c('div',{staticClass:\"two-box\"},[_c('render-icon',{attrs:{\"icon-param\":{projectIcon:data.item.projectIcon,index:0}}}),_c('render-icon',{attrs:{\"icon-param\":{projectIcon:data.item.projectIcon,index:1}}})],1)]:[_c('div',{staticClass:\"three-box\"},[_c('div',{staticClass:\"top\"},[_c('render-icon',{attrs:{\"icon-param\":{projectIcon:data.item.projectIcon,index:0}}})],1),_c('div',{staticClass:\"bottom\"},[_c('render-icon',{attrs:{\"icon-param\":{projectIcon:data.item.projectIcon,index:1},\"is-left\":\"true\"}}),_c('div',{staticClass:\"bottom-right\"},[(data.item.thumbnailCounts > 3)?_c('p',{staticClass:\"count-box\"},[_vm._v(\" 共\"+_vm._s(data.item.thumbnailCounts || 0)+\"张 \")]):_vm._e(),_c('render-icon',{attrs:{\"icon-param\":{projectIcon:data.item.projectIcon,index:2}}})],1)],1)])]],2)]:[_c('div',{staticClass:\"project-icon\"},[_c('img',{staticClass:\"default-icon\",attrs:{\"src\":require('@/assets/icons/workbench_pic_file_empty@3x.png')}})])],_c('div',{staticClass:\"project-info\"},[_c('div',{ref:\"itemName\",staticClass:\"project-name\"},[_vm._v(\" \"+_vm._s(_vm._f(\"filterFormatName\")((data.item.name || '')))+\" \")]),_c('div',{staticClass:\"project-time c-text-label\"},[_vm._v(\" 更新时间：\"+_vm._s(_vm._f(\"moment\")(data.item.update_time,'timezone', 'Asia/Shanghai', 'MM月DD日 HH:mm'))+\" \")])])],2)]]}}],null,false,1786446263)})],1),_c('opt-project-dialog',{on:{\"onAddedProject\":_vm.onAddedProjectCallback},nativeOn:{\"mousedown\":function($event){$event.stopPropagation();}},model:{value:(_vm.showResetProjectName),callback:function ($$v) {_vm.showResetProjectName=$$v},expression:\"showResetProjectName\"}}),_c('importProgressDialog',{attrs:{\"importFilePaths\":_vm.importFilePaths,\"status\":_vm.importProgress.status,\"data\":_vm.importProgress,\"importName\":_vm.myImportName},on:{\"onCancelled\":_vm.handleCancelImport},nativeOn:{\"mousedown\":function($event){$event.stopPropagation();}},model:{value:(_vm.showImportProgress),callback:function ($$v) {_vm.showImportProgress=$$v},expression:\"showImportProgress\"}}),_c('renameProjectDialog',{attrs:{\"value\":_vm.showRenameDialog,\"text\":_vm.inputRenameText},on:{\"onClose\":function($event){_vm.showRenameDialog = false},\"onConfirm\":_vm.onRenameConfirm},nativeOn:{\"mousedown\":function($event){$event.stopPropagation();}}}),_c('delete-progress-dialog',{attrs:{\"isDeleteProject\":true,\"status\":_vm.deleteProgress.status,\"data\":_vm.deleteProgress},nativeOn:{\"mousedown\":function($event){$event.stopPropagation();}},model:{value:(_vm.showDeleteProgress),callback:function ($$v) {_vm.showDeleteProgress=$$v},expression:\"showDeleteProgress\"}})],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"top\":\"30vh\",\"width\":\"440px\",\"custom-class\":\"common-dialog\",\"visible\":_vm.visible,\"close-on-click-modal\":false,\"close-on-press-escape\":false},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('div',{staticClass:\"title\"},[_vm._v(\"创建新项目\")]),_c('div',{staticClass:\"container\"},[_c('el-input',{ref:\"inputProjectName\",attrs:{\"placeholder\":\"请输入项目名称\",\"maxlength\":\"30\"},on:{\"change\":_vm.handleNameChange},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.submit.apply(null, arguments)}},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('div',{staticClass:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading,\"disabled\":_vm.form.name == null || _vm.form.name == ''},on:{\"click\":_vm.submit}},[_vm._v(\" 保存 \")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <el-dialog\n        top=\"30vh\"\n        width=\"440px\"\n        custom-class=\"common-dialog\"\n        :visible.sync=\"visible\"\n        :close-on-click-modal=\"false\"\n        :close-on-press-escape=\"false\"\n    >\n        <div class=\"title\">创建新项目</div>\n\n        <div class=\"container\">\n            <el-input\n                placeholder=\"请输入项目名称\"\n                @change=\"handleNameChange\"\n                v-model=\"form.name\"\n                ref=\"inputProjectName\"\n                maxlength=\"30\"\n                @keydown.native.enter=\"submit\">\n\n            </el-input>\n        </div>\n\n        <div class=\"footer\">\n            <el-button\n                type=\"primary\"\n                :loading=\"loading\"\n                :disabled=\"form.name == null || form.name == ''\"\n                @click=\"submit\">\n                保存\n            </el-button>\n        </div>\n    </el-dialog>\n</template>\n\n<script>\n\nimport { mapActions, mapGetters, mapMutations } from 'vuex'\nimport toast from '@/mixins/toast'\n\nimport { Dialog, Input } from 'element-ui'\nimport Project from '@/model/ProjectModel.ts'\nimport TsDialog from '@/components/TsDialog/ts-dialog'\n\n\nexport default {\n    name: 'optProjectDialog',\n    mixins: [toast],\n    components: {\n        'el-dialog': TsDialog,\n        'el-input': Input\n    },\n    props: {\n        value: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data() {\n        return {\n            loading: false,\n            visible: this.value,\n            form: {\n                name: ''\n            },\n            ifInconClose: true\n        }\n    },\n    filters: {},\n    computed: {\n        ...mapGetters([\n            'userId'\n        ])\n    },\n    watch: {\n        value: {\n            handler(val) {\n                this.visible = val\n\n                if (val) {\n                    this.$nextTick(() => {\n                        this.$refs.inputProjectName.focus()\n                    })\n                }\n            },\n            immediate: true\n        },\n        visible(val) {\n            if (!val && this.ifInconClose == true) {\n                this.$tsStat?.event('cake_workbench', {\n                    cake_operate: 'add_popup_close'\n                })\n            }\n            this.$emit('input', val)\n            this.ifInconClose == false\n        }\n    },\n    mounted() {\n        this.ifInconClose = true\n\n\n        // this.initData()\n    },\n    methods: {\n        ...mapActions('project', ['ACT_InsertProject']),\n\n        // async initData() {},\n        async submit() {\n            this.$tsStat?.event('cake_workbench', {\n                cake_operate: 'add_popup_save'\n            })\n            let name = this.form.name.trim()  //去除左右两边的空格\n            name = name.replace(/ +/g, ' ') //中间的多个空格变一个\n            if (!name) {\n                this.tsNotify({\n                    type: 'warning',\n                    message: '请输入项目名称'\n                })\n                return\n            }\n            if (name.byteLength() > 60) {\n                this.tsNotify({\n                    type: 'warning',\n                    message: '最多可支持输入30个汉字~'\n                })\n                return\n            }\n\n            this.loading = true\n            this.ifInconClose = false\n\n            try {\n                const newProjectInfo = new Project(this.userId, name, null)\n                newProjectInfo.visit_time = new Date().getTime()\n                await this.ACT_InsertProject(newProjectInfo)\n                this.form.name = ''\n                this.visible = false\n                this.$emit('onAddedProject', newProjectInfo)\n            } catch (err) {\n                this.tsNotify({\n                    type: 'error',\n                    message: err.message\n                })\n                this.form.name = ''\n                this.visible = false\n            }\n            this.loading = false\n        },\n        handleNameChange() {\n            this.$tsStat?.event('cake_workbench', {\n                cake_operate: 'add_popup_input_text'\n            })\n        }\n\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./optProjectDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./optProjectDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./optProjectDialog.vue?vue&type=template&id=55017226&scoped=true&\"\nimport script from \"./optProjectDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./optProjectDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"55017226\",\n  null\n  \n)\n\nexport default component.exports","// @ts-ignore\nimport Project from '@/model/ProjectModel'\nimport { defineComponent } from 'vue'\nimport { mapActions } from 'vuex'\nimport { DeleteProgressStatus } from '@/constants'\nimport deleteProgressDialog from '@/views/BatchRetouch/components/deleteProgressDialog.vue'\n// @ts-ignore\nimport { batchDeleteProject } from '@/api/projectApi'\n// @ts-ignore\nimport { deleteThumbnailIds } from '@/api/thumbnailApi'\n// @ts-ignore\nimport { findImageIdsByProjectId } from '@/universal/datastore/thumbnailDao'\nimport useHomeItemPointsRepositories from '@/composables/points/useHomeItemPointsRepositories'\n\nexport const batchDeleteProjects = defineComponent({\n    components: {\n        'delete-progress-dialog': deleteProgressDialog\n    },\n    setup() {\n\n        const { PointHomeItem } = useHomeItemPointsRepositories()\n        return {\n            PointHomeItem\n        }\n    },\n    data() {\n        return {\n            deleteProgress: {\n                status: DeleteProgressStatus.Start,\n                over: 1,\n                total: 1\n            },\n            showDeleteProgress: false,\n            onShowDeleteDialog: false\n        }\n    },\n    computed: {},\n    watch: {\n        showDeleteProgress(val) {\n            if (val) {\n                // @ts-ignore\n                this.unregisterShortcut()\n            } else {\n                // @ts-ignore\n                this.registerShortcut()\n            }\n        },\n        onShowDeleteDialog(val) {\n            if (val) {\n                // @ts-ignore\n                this.unregisterShortcut()\n            } else {\n                if (this.showDeleteProgress) {\n                    // @ts-ignore\n                    this.unregisterShortcut()\n                } else {\n                    // @ts-ignore\n                    this.registerShortcut()\n                }\n            }\n        }\n    },\n    methods: {\n        ...mapActions('project', [\n            'ACT_InsertProject',\n            'ACT_UpdateProject',\n            'ACT_DeleteProject'\n        ]),\n        async onDeleteProject(data: Project) {\n            // @ts-ignore\n            await this.ACT_DeleteProject(data.id)\n            // 注意:调用tsFileImport.ts里面的删除缓存接口\n            // @ts-ignore\n            await this.deleteProjectCache(data)\n            // @ts-ignore\n            this.selectProjects.delete(data.id)\n        },\n        remove(data: any) {\n            this.onShowDeleteDialog = true\n            this.tsConfirm({\n                title: '删除该项目',\n                message: '删除之后该项目下的所有图片将会被删除，但磁盘中的原始文件仍然还在。',\n                customMessageStyle: 'textAlign: left'\n            }).then(async _ => {\n                this.onShowDeleteDialog = false\n                //@ts-ignore\n                // this.$tsStat?.event('cake_workbench', {\n                //     cake_operate: 'delete_project'\n                // })\n                this.PointHomeItem('delete_project')\n\n                this.showDeleteProgress = true\n                this.deleteProgress.status = DeleteProgressStatus.Start\n                this.deleteProgress.status = DeleteProgressStatus.Deleting\n\n                this.onDeleteProject(data).then(async () => {\n                    await this.deleteRemoteProject(data)\n\n                    // @ts-ignore 删除单个加载单个\n                    this.loadNext(1)\n                    this.deleteProgress.status = DeleteProgressStatus.DeleteOver\n                    this.showDeleteProgress = false\n                }).catch(e => {\n                    console.error(e)\n                    this.deleteProgress.status = DeleteProgressStatus.RequestDeleteError\n                    this.showDeleteProgress = false\n                })\n            }).catch(_ => {\n                this.onShowDeleteDialog = false\n                console.log('cancel')\n            })\n        },\n        cloneMap(data: Map<number, Project>) {\n            let aNewMap = new Map<number, Project>()\n            for (const item of data) {\n                let [key, val] = item\n                aNewMap.set(key, val)\n            }\n            return aNewMap\n        },\n        async deleteRemoteImageIds(val: Project) {\n            let thumbIds = await findImageIdsByProjectId(val.id)\n            let imageIds = JSON.stringify(thumbIds)\n            if (imageIds && imageIds.length > 0) {\n                await deleteThumbnailIds(val.id, imageIds)\n            }\n        },\n        async onBatchDeleteProjects(items: Map<number, Project>): Promise<any> {\n            let lastError = null\n            try {\n                this.deleteProgress.status = DeleteProgressStatus.Start\n                this.deleteProgress.status = DeleteProgressStatus.Deleting\n                const itemSize = items.size\n                let promiseList:any = []\n                const copiedItems = new Map()\n                for (const item of items) {\n                    let [key, val] = item\n                    copiedItems.set(key, val)\n                    // 批量删除远程的缩略图列表 ,后端已实现了根据工程id上传，此处不需要调删除图片了\n                    // const p = this.deleteRemoteImageIds(val)\n                    // promiseList.push(p)\n                    await this.onDeleteProject(val)\n                }\n                // 删除远端工程图片id列表后，再删除远程工程id\n                Promise.all(promiseList).then(() => {\n                    this.deleteRemoteProjects(copiedItems)\n                })\n                this.deleteProgress.status = DeleteProgressStatus.DeleteOver\n                // @ts-ignore\n                let count = Math.min(this.lazyLoadObj.singlePageCount, itemSize)\n                // @ts-ignore\n                this.loadNext(count)\n            } catch (e) {\n                lastError = e\n                this.deleteProgress.status = DeleteProgressStatus.RequestDeleteError\n                this.showDeleteProgress = false\n            }\n\n            if (lastError) {\n                return Promise.reject(lastError)\n            }\n        },\n\n        async deleteRemoteProjects(items: Map<number, Project>) {\n            let projectIds = []\n            for (const item of items) {\n                let [key, _] = item\n                projectIds.push({\n                    id: key\n                })\n            }\n            await batchDeleteProject(projectIds)\n        },\n\n        async deleteRemoteProject(item: Project) {\n            await batchDeleteProject([{ id: item.id }])\n        },\n\n        batchRemove(data: Map<number, Project>) {\n            this.onShowDeleteDialog = true\n            let newList = this.cloneMap(data)\n            console.log(`批量删除`, newList)\n            let count = newList.size\n            //`确认删除${selectedItems.length}张图片`\n            let h = this.$createElement\n            let customTitleEl = null\n            let style = { style: 'font-size: 16px;font-weight: 500; margin: 12px 0 16px' }\n            let numStyle = { style: 'font-size: 15px;font-weight: 500; margin: 12px 2px 16px 2px;color:#F5D228' }\n\n            customTitleEl = h('div', style, [\n                h('span', style, '确认删除'),\n                h('span', numStyle, `${ count }`),\n                h('span', style, '个项目')\n            ])\n            this.tsConfirm({\n                title: null,\n                customTitleEl: customTitleEl,\n                message: `删除之后项目下的所有图片将会被删除，但磁盘中的原始文件仍然还在。`,\n                customMessageStyle: 'textAlign: left'\n            }).then(_ => {\n                //@ts-ignore\n                this.PointHomeItem('delete_project')\n                this.showDeleteProgress = true\n                this.onShowDeleteDialog = false\n                this.onBatchDeleteProjects(data)\n                    .then(() => {\n                        //@ts-ignore\n                        this.selectProjects.clear()\n                    })\n                    .catch(e => {\n                        console.log(e)\n                    })\n            }).catch(_ => {\n                this.showDeleteProgress = false\n                this.onShowDeleteDialog = false\n                console.log('cancel')\n            })\n        }\n    }\n})\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isDown),expression:\"isDown\"}],staticClass:\"claSwipeMask\",style:({\n                left:`${_vm.rect.x}px`,\n                top:`${_vm.rect.y}px`,\n                width:`${_vm.rect.w}px`,\n                height:`${_vm.rect.h}px`\n    })})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div v-show=\"isDown\" class=\"claSwipeMask\"\n         :style=\"{\n                    left:`${rect.x}px`,\n                    top:`${rect.y}px`,\n                    width:`${rect.w}px`,\n                    height:`${rect.h}px`\n        }\">\n    </div>\n</template>\n\n<script>\n\nfunction getRect(point0, point1) {\n    point0 = point0 || { x: 0, y: 0 }\n    point1 = point1 || { x: 0, y: 0 }\n\n    let minX = Math.min(point0.x, point1.x)\n    let minY = Math.min(point0.y, point1.y)\n    let maxY = Math.max(point0.y, point1.y)\n    let maxX = Math.max(point0.x, point1.x)\n    let w = Math.abs(minX - maxX)\n    let h = Math.abs(minY - maxY)\n    // eslint-disable-next-line use-isnan\n    if (isNaN(minX)) {\n    }\n    return { x: minX, y: minY, w: w, h: h }\n}\n\nfunction rectGetMaxY(rc) {\n    return rc.h + rc.y\n}\n\nfunction rectGetMaxX(rc) {\n    return rc.w + rc.x\n}\n\nfunction rectGetMinX(rc) {\n    return rc.x\n}\n\nfunction rectGetMinY(rc) {\n    return rc.y\n}\n\nimport Vue from 'vue'\n\nconst Direction = {\n    None: -1,\n    Down: 0,\n    Up: 1\n}\nlet requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||\n    window.webkitRequestAnimationFrame || window.msRequestAnimationFrame\nlet cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame\n\nexport default Vue.extend({\n    name: 'swipeChooseOp',\n    props: {\n        acceptEl: {\n            type: Object,\n            value: { 'el': null }\n        },\n        eventEl: {\n            type: HTMLElement,\n            value: null\n        },\n        // 是否可以有mouseDown的效果,出现弹框时候，不需要鼠标拖拽效果\n        canMouseDown: {\n            type: Boolean,\n            value: true\n        },\n        // 是否是自定义的滚动处理，例如使用了virtual-scroll相关的组件\n        isCustomScroll: {\n            type: Boolean,\n            value: false // false默认为dom原生滚动\n        }\n    },\n    watch: {\n        rect(val) {\n            if (!this.isDown || !this.canMouseDown || !this.isMoved) {\n                return\n            }\n            let outRect = this.rect\n            if (!this.isCustomScroll) {\n                outRect = getRect(this.rStartPoint, this.rEndPoint)\n            }\n            this.$emit(`onSelectionChanged`, outRect, this.startPoint)\n        },\n        canMouseDown(val) {\n            if (!val) {\n                this.isDown = false\n            }\n        }\n    },\n    data() {\n        return {\n            // 在自定义virtual-scroll组件内，this.rect即是显示的mask层区域，也是真实的rect\n            startPoint: null,\n            endPoint: null,\n            // 增加真实startPoint、endPoint 用于非自定义的scroller,this.rect只是显示的mask层区域，真实返回给外部用的rect需要由rStartPoint和rEndPoint来计算\n            rStartPoint: null,\n            rEndPoint: null,\n\n\n            isDown: false,\n            isMoved: false,\n            offsetPosY: 0, // 获得当前的acceptEl到视窗口的偏移值\n            rect: {\n                x: 0,\n                y: 0,\n                w: 0,\n                h: 0\n            },\n            scrollTimer: null,\n            intervalY: 5, // y的间隔，默认值是5像素\n            scrollDirection: Direction.None,\n            constScrollHeight: null,\n            speed: 1,// 速度,倍率\n            lastDownTime: null\n        }\n    },\n    methods: {\n        getEventEl() {\n            return this.eventEl == null ? window : this.eventEl\n        },\n        installSwipeEvents() {\n            let eventEl = this.getEventEl()\n            this.getAcceptEl().addEventListener('mousedown', this.onMouseDown, { capture: false, passive: true })\n            eventEl.addEventListener('mousemove', this.onMouseMove)\n            eventEl.addEventListener('mouseup', this.onMouseUp)\n            eventEl.addEventListener('resize', this.onResize)\n        },\n        removeSwipeEvents() {\n            let eventEl = this.getEventEl()\n            this.getAcceptEl().removeEventListener('mousedown', this.onMouseDown, false)\n            eventEl.removeEventListener('mousemove', this.onMouseMove)\n            eventEl.removeEventListener('mouseup', this.onMouseUp)\n            eventEl.removeEventListener('resize', this.onResize)\n        },\n        transformXY(e) {\n            let { clientX, clientY } = e\n            let offsetX = clientX\n            let offsetY = clientY - this.offsetPosY\n            if (this.isCustomScroll) {\n                // 缩略图(TSThumbnailCollectionView调用这里的)是可以的\n                offsetY = clientY - this.offsetPosY + this.getAcceptEl().scrollTop\n            }\n            return {\n                x: offsetX,\n                y: offsetY\n            }\n        },\n        /*\n            检测坐标点是否是在接受的acceptEl内部\n         */\n        pointInside(e) {\n            let ret = false\n            let point = this.transformXY(e)\n            let scrollContentHeight = this.getAcceptEl().scrollHeight\n            let scrollTop = this.getAcceptEl().scrollTop\n            let scrollContentWidth = this.getAcceptEl().scrollWidth\n            let scrollLeft = this.getAcceptEl().scrollLeft\n\n            let scrollRect = {\n                x: scrollLeft,\n                y: scrollTop,\n                w: scrollContentWidth,\n                h: scrollContentHeight\n            }\n            if (\n                point.x >= rectGetMinX(scrollRect)\n                &&\n                point.x <= rectGetMaxX(scrollRect)\n                &&\n                point.y >= rectGetMinY(scrollRect)\n                &&\n                point.y <= rectGetMaxY(scrollRect)\n            ) {\n                ret = true\n            }\n            return ret\n        },\n        onResize(e) {\n            this.reset()\n        },\n        onMouseDown(e) {\n            this.lastDownTime = new Date().getTime()\n            this.startPoint = this.transformXY(e)\n            if (!this.isCustomScroll) {\n                this.rStartPoint = { ...this.startPoint }\n                this.rStartPoint.y += this.getAcceptEl().scrollTop\n            }\n            this.rect = { ...this.startPoint, w: 0, h: 0 }\n            this.isDown = this.canMouseDown ? true : false\n            this.isMoved = false\n            this.stopTimer()\n        },\n        onMouseMove(e) {\n            let nowTime = new Date().getTime()\n            let diff = nowTime - (this.lastDownTime || nowTime)\n            // 增加down到move的之间的间隔判断，如果，时间<200毫秒则被拦截掉，防止Command+MouseLeft和moseLeft的拖拽事件冲突\n            const activeDuration = 200\n            if (!this.isDown || diff < activeDuration) {\n                return\n            }\n            console.log(`swipeChooseOp.onMouseMove: diff`, diff)\n            this.isMoved = true\n            let pt = this.transformXY(e)\n            this.endPoint = pt\n            if (!this.isCustomScroll) {\n                this.rEndPoint = { ...pt }\n                this.rEndPoint.y += this.getAcceptEl().scrollTop\n            }\n            let rect = getRect(this.startPoint, this.endPoint)\n            this.rect = rect\n            this.checkScrollState(e)\n        },\n        onMouseUp(e) {\n            this.lastDownTime = new Date().getTime()\n            if (!this.isDown) {\n                return\n            }\n            this.isDown = false\n            this.isMoved = false\n            this.endPoint = this.transformXY(e)\n            let rect = getRect(this.startPoint, this.endPoint)\n            this.rect = rect\n            this.stopTimer()\n\n            if (rect.h > 5 || rect.w > 5) {\n                this.$emit('onSelectEnd')\n            }\n        },\n        /* 获得el到client的顶部的偏移值 */\n        getOffsetClient(el) {\n            let offY = 0\n            let target = el\n            while ((target = target.offsetParent) != null) {\n                offY += target.offsetTop\n            }\n            return offY\n        },\n        getAcceptEl() {\n            return document.getElementById(this.acceptEl.el)\n        },\n        onScroller() {\n            if (this.scrollDirection == Direction.None) {\n                return\n            }\n            let intervalY = this.scrollDirection == Direction.Up ? -this.intervalY : this.intervalY\n            intervalY = intervalY * this.speed\n            let scrollTop = this.getAcceptEl().scrollTop + intervalY\n            let scrollContentH = this.constScrollHeight\n            let clientH = this.getAcceptEl().clientHeight\n            if (intervalY < 0) {\n                if (scrollTop <= 0) {\n                    scrollTop = 0\n                }\n                let topY = scrollTop\n                if (!this.isCustomScroll) {\n                    topY = this.getAcceptEl().getBoundingClientRect().y\n                }\n                this.endPoint = { x: this.endPoint.x, y: topY }\n                this.rEndPoint = { ...this.endPoint }\n            }\n\n            if (intervalY > 0) {\n                let next = scrollTop + clientH\n                if (next >= scrollContentH) {\n                    scrollTop = scrollContentH - clientH\n                    next = scrollContentH\n                }\n                this.endPoint = { x: this.endPoint.x, y: next }\n                this.rEndPoint = { ...this.endPoint }\n            }\n            let rect = getRect(this.startPoint, this.endPoint)\n            this.rect = rect\n\n            this.getAcceptEl().scrollTop = scrollTop\n            this.scrollTimer = requestAnimationFrame(this.onScroller)\n        },\n        startTimer() {\n            this.stopTimer()\n            if (!this.scrollTimer) {\n                this.scrollTimer = requestAnimationFrame(this.onScroller)\n            }\n        },\n        stopTimer() {\n            if (this.scrollTimer) {\n                cancelAnimationFrame(this.scrollTimer)\n                this.scrollTimer = null\n            }\n        },\n        /* 计算检测,是否达到上边，是否达到下边*/\n        checkScrollState(e) {\n            if (this.getAcceptEl().offsetParent == null) {\n                return\n            }\n            let clientH = this.getAcceptEl().clientHeight\n            let scrollOffsetTop = this.getAcceptEl().scrollTop\n            let clientTop = this.getAcceptEl().getBoundingClientRect().y\n            if (!this.constScrollHeight) {\n                this.constScrollHeight = this.getAcceptEl().scrollHeight\n            }\n            let point = this.transformXY(e)\n            this.scrollDirection = Direction.None\n            let ofY = point.y - scrollOffsetTop\n            let diffTop = ofY\n            if (!this.isCustomScroll) {\n                ofY = point.y\n                diffTop = point.y - clientTop\n            }\n\n            if (diffTop <= 0) {\n                this.scrollDirection = Direction.Up\n                this.speed = 1 + Math.abs(ofY) / 100\n            }\n            if (ofY >= clientH) {\n                this.scrollDirection = Direction.Down\n                ofY = ofY - clientH\n                this.speed = 1 + Math.abs(ofY) / 100\n            }\n            if (this.scrollDirection != Direction.None) {\n                this.startTimer()\n            }\n        },\n        reset() {\n            this.constScrollHeight = null\n        }\n    },\n    beforeDestroy() {\n        this.removeSwipeEvents()\n    },\n    mounted() {\n        this.installSwipeEvents()\n        this.offsetPosY = this.getOffsetClient(this.getAcceptEl())\n    }\n})\n\n</script>\n\n<style scoped>\n.claSwipeMask {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background: #FFFFFF10;\n    border: 1px solid #FFFFFF10;\n    pointer-events: none;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./swipeChooseOp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./swipeChooseOp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./swipeChooseOp.vue?vue&type=template&id=32de148b&scoped=true&\"\nimport script from \"./swipeChooseOp.vue?vue&type=script&lang=js&\"\nexport * from \"./swipeChooseOp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./swipeChooseOp.vue?vue&type=style&index=0&id=32de148b&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32de148b\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport swipeChooseOp from '@/components/CollectionView/drag/swipeChooseOp'\n\nconst SwipeChoose = {\n    install(Vue, options) {\n        Vue.prototype.$swipeChooseShow = function (parentEl, options) {\n            let SwipeChooseOpConstructor = Vue.extend(swipeChooseOp)\n            const component = (new SwipeChooseOpConstructor(\n                {\n                    propsData: { ...options }\n                })).$mount()\n            parentEl.appendChild(component.$el)\n            return component\n        }\n    }\n}\n\nexport default SwipeChoose\n","import Project from '@/model/ProjectModel'\nimport Vue from 'vue'\nimport { Optional } from '@/universal/types/foundation'\n// @ts-ignore\nimport SwcPlugin from '@/components/CollectionView/drag'\nimport ipcRenderer from '@/qt-ipc/Ipc-renderer'\n\nVue.use(SwcPlugin)\n\n/*\n    判断矩形是否相交\n */\nfunction isRectIntersect(rect0: any, rect1: any): boolean {\n    let minX = Math.min(rect0.x, rect1.x)\n    let maxX = Math.max(rect0.x + rect0.w, rect1.x + rect1.w)\n    let diffX = Math.abs(maxX - minX)\n\n    let minY = Math.min(rect0.y, rect1.y)\n    let maxY = Math.max(rect0.y + rect0.h, rect1.y + rect1.h)\n    let diffY = Math.abs(maxY - minY)\n\n    let maxW = rect0.w + rect1.w\n    let maxH = rect0.h + rect1.h\n    if (diffX < maxW && diffY < maxH) {\n        return true\n    }\n    return false\n}\n\nexport const batchSelectsProject = Vue.extend({\n    data(): {\n        selectProjects: Map<number, Project>,\n        lastSelectedIndex: Optional<number>,\n        swipeChooseRef: any,\n        canMouseDragSelection: boolean,\n        //el\n        allProjects: Map<number, Project>,\n        isOnDragMouseDown: boolean\n        } {\n        return {\n            selectProjects: new Map<number, Project>(),\n            lastSelectedIndex: null,\n            swipeChooseRef: null,\n            canMouseDragSelection: true,\n            allProjects: new Map<number, Project>(),\n            isOnDragMouseDown: false\n        }\n    },\n    watch: {\n        '$store.state.project.projects': {\n            handler: function (val) {\n                this.allProjects.clear()\n                for (const item of val) {\n                    this.allProjects.set(item.id, item)\n                }\n                if (this.swipeChooseRef)\n                    this.swipeChooseRef.reset()\n            },\n            immediate: true\n        },\n        showResetProjectName: {\n            handler: function (val) {\n            },\n            immediate: true\n        },\n        showRenameDialog: {\n            handler: function (val) {\n            },\n            immediate: true\n        }\n    },\n    computed: {\n        findNextProjectIndex(): number {\n            let lastSelectedIndex = this.lastSelectedIndex\n            if (lastSelectedIndex == null) {\n                // @ts-ignore\n                for (let i = this.projects.length - 1; i >= 0; i--) {\n                    // @ts-ignore\n                    let proj = this.projects[i]\n                    let isSelected = this.isSelected(proj)\n                    if (isSelected) {\n                        lastSelectedIndex = i\n                        break\n                    }\n                }\n            }\n            return lastSelectedIndex!\n        }\n    },\n    methods: {\n        forceUpdate() {\n            let ref = this.$refs['virtualCollectionRef']\n            if (!ref) {\n                return\n            }\n            //@ts-ignore\n            ref.$forceUpdate()\n        },\n        installShortcuts() {\n            this.registerShortcut()\n            this.registerMouseSelectEvents()\n        },\n        removeShortcuts() {\n            this.unregisterShortcut()\n        },\n        // 快捷键注册\n        registerShortcut() {\n            ipcRenderer?.on('onKeyboardShortcutInvoked', (event: any, args: { name: string }) => {\n                // console.log(`收到快捷键事件:${args}`)\n                if (args.name == 'CommandOrControl+A') {\n                    this.selectedAll(true)\n                    return\n                }\n                if (args.name == 'CommandOrControl+D') {\n                    this.selectedAll(false)\n                    return\n                }\n                if (args.name == 'DeleteOrBackspace') {\n                    if (this.selectProjects.size === 1) {\n                        let removeItem: Project\n                        for (const item of this.selectProjects) {\n                            let [key, val] = item\n                            removeItem = val\n                        }\n                        //@ts-ignore\n                        this.remove(removeItem)\n                        return\n                    } else if (this.selectProjects.size > 1) {\n                        //@ts-ignore\n                        this.batchRemove(this.selectProjects)\n                        return\n\n                    }\n\n                }\n            })\n            ipcRenderer?.send('registerKeyboardShortcut')\n        },\n        unregisterShortcut() {\n            console.log(`注销快捷键事件:}`)\n            ipcRenderer?.removeAllListeners('onKeyboardShortcutInvoked')\n            this.activeShortcut(false)\n        },\n        activeShortcut(isActive: Boolean) {\n            let event = isActive ? 'registerKeyboardShortcut' : 'unRegisterKeyboardShortcut'\n            ipcRenderer?.send(event)\n        },\n        // 处理选中状态\n        selectedAll(selected: Boolean) {\n            if (selected) {\n                // @ts-ignore\n                const list = this.projects\n                for (let it of list) {\n                    this.setSelected(it, true)\n                }\n                this.lastSelectedIndex = list.length - 1\n            } else {\n                if (!this.isOnDragMouseDown) {\n                    this.clearSelects()\n                    this.lastSelectedIndex = null\n                }\n                this.isOnDragMouseDown = false\n            }\n            this.forceUpdate()\n        },\n        /*\n            isMeta:表示键盘按键，按下的释放是meta按钮\n         */\n        isSelected(project: Project) {\n            let item = this.selectProjects.get(project.id)\n            return item !== null && item !== undefined\n        },\n        setSelected(project: Project, isSelected: Boolean) {\n            if (isSelected) {\n                this.selectProjects.set(project.id, project)\n            } else {\n                this.selectProjects.delete(project.id)\n            }\n        },\n        clearSelects() {\n            this.selectProjects.clear()\n            this.forceUpdate()\n        },\n        onLeftMouseClick(project: Project, idx: number) {\n            this.selectProjects.clear()\n            this.selectProjects.set(project.id, project)\n            this.lastSelectedIndex = idx - 1\n            this.forceUpdate()\n        },\n        onLeftMouseShiftClick(project: Project, projectIndex: number) {\n            let lastIndex = this.findNextProjectIndex\n            if (lastIndex == null) {\n                return\n            }\n            let nextIndex = projectIndex - 1\n            let min = Math.min(nextIndex, lastIndex)\n            let max = Math.max(nextIndex, lastIndex)\n            for (let i = min; i <= max; i++) {\n                // @ts-ignore\n                let project = this.projects[i]\n                this.setSelected(project, true)\n            }\n            this.forceUpdate()\n        },\n        onCommandLeftMouseClick(isMeta: Boolean, project: Project, projectIndex: number) {\n            if ((isMeta && this.$isWin) || (!isMeta && this.$isMac)) {\n                return\n            }\n            let projIndex = projectIndex - 1\n            let isSelected = this.isSelected(project)\n            this.setSelected(project, !isSelected)\n            this.lastSelectedIndex = !isSelected ? projIndex : null\n            this.forceUpdate()\n        },\n        /*\n            鼠标拖动选择项目\n         */\n        registerMouseSelectEvents() {\n\n        },\n        /*\n            鼠标拖动滑动区域内的选中\n         */\n        setSelectItemsInRect(rect: { x: number, y: number, w: number, h: number }) {\n            this.selectProjects.clear()\n            // projectCardRef此项注入到card里面的引用\n            let virtualCollectionRef = this.$refs['virtualCollectionRef']\n            if (!virtualCollectionRef) {\n                return\n            }\n            let nextNodes = (virtualCollectionRef as any).$children\n            if (!nextNodes || nextNodes.length === 0) {\n                return\n            }\n            let projectVmItems = nextNodes[0].$children as any\n            if (!projectVmItems || !Array.isArray(projectVmItems)) {\n                return\n            }\n            for (const projectVmItem of projectVmItems) {\n                let bounds = projectVmItem.$el.getBoundingClientRect()\n                let itemBounds = {\n                    x: bounds.x,\n                    y: bounds.y + this.$el.scrollTop, // 此处需加上scrollTop的偏移值\n                    w: bounds.width,\n                    h: bounds.height\n                }\n                const isIntersect = isRectIntersect(rect, itemBounds)\n                if (isIntersect) {\n                    let projectId = projectVmItem.$vnode.data.attrs.id\n                    if (projectId) {\n                        const proj: Project = this.allProjects.get(projectId)!\n                        this.selectProjects.set(proj.id, proj)\n                    }\n                }\n            }\n        },\n        /*\n            增加鼠标拖拽选中处理\n         */\n        closeContextMenu() {\n            if (!this.swipeChooseRef) {\n                return\n            }\n            this.canMouseDragSelection = true\n            this.swipeChooseRef.$props.canMouseDown = true\n        },\n        onContextMenuItemClick(action: any) {\n            if (!this.swipeChooseRef) {\n                return\n            }\n            this.canMouseDragSelection = true\n            this.swipeChooseRef.$props.canMouseDown = true\n        },\n        showContextMenu() {\n            if (!this.swipeChooseRef) {\n                return\n            }\n            this.canMouseDragSelection = false\n            this.swipeChooseRef.$props.canMouseDown = false\n        },\n        addSwipeChooseComponent() {\n            let acceptEl = (this.$refs['virtualCollectionRef'] as any).$el\n            let component = this.$swipeChooseShow(this.$el as HTMLElement, {\n                acceptEl: { 'el': acceptEl },\n                eventEl: null,\n                canMouseDown: this.canMouseDragSelection,\n                isCustomScroll: false\n            })\n            /*\n                接受鼠标滑动选中的事件，rect:{x:number,y:number,w:number,h:number}\n             */\n            let that = this\n            this.swipeChooseRef = component\n            // startPoint mousedown的位置\n            component.$on('onSelectionChanged', (rect: { x: number, y: number, w: number, h: number }, startPoint: {\n                x: number,\n                y: number\n            }) => {\n                let { x, y, w, h } = rect\n                if (x == null || w == null) {\n                    return\n                }\n                that.isOnDragMouseDown = true\n                that.setSelectItemsInRect(rect)\n                that.forceUpdate()\n            })\n        }\n    },\n    mounted() {\n        // this.addSwipeChooseComponent()\n    }\n})\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('VirtualCollection',{staticClass:\"global__scroll-style\",style:({overflowX:_vm.showHorizontalSlider?'scroll':'hidden'}),attrs:{\"cellSizeAndPositionGetter\":_vm.cellSizeAndPositionGetter,\"collection\":_vm.myItems,\"height\":_vm.height,\"width\":_vm.width,\"scrollToBottomRange\":_vm.bottomNearDistance},scopedSlots:_vm._u([{key:\"cell\",fn:function(props){return [_vm._t(\"default\",null,{\"data\":{item:props.data.data,index:props.data.index}})]}}],null,true)},[_c('template',{slot:\"header\"},[_c('div',{staticClass:\"claHeader\"},[_vm._t(\"header\")],2)])],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export enum loadingStatus {\n    none = 0,\n    loading = 1, // 加载中\n    finished = 2, // 单此加载完成\n    totalEnd = 3 // 到底了\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"claLoadingMoreRoot\"},[(_vm.loadingStatus == _vm.constLoadingStatus.loading)?_c('div',{staticClass:\"claMore\"},[_c('img',{staticClass:\"claImg\",attrs:{\"src\":require('@/assets/icons/favicon.png')}}),_c('span',[_vm._v(\"正在加载更多~\")])]):_vm._e(),(_vm.loadingStatus == _vm.constLoadingStatus.totalEnd)?_c('div',{staticClass:\"claMore\"},[_vm._v(\"没有更多内容了~\")]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"claLoadingMoreRoot\">\n        <div class=\"claMore\" v-if=\"loadingStatus == constLoadingStatus.loading\">\n            <img class=\"claImg\" :src=\"require('@/assets/icons/favicon.png')\"/><span>正在加载更多~</span>\n        </div>\n        <div class=\"claMore\" v-if=\"loadingStatus == constLoadingStatus.totalEnd\">没有更多内容了~</div>\n    </div>\n</template>\n\n<script>\nimport { loadingStatus } from '@/components/CollectionView/loadingMore/constant'\n\nexport default {\n    name: 'loadingMore',\n    props: {\n        loadingStatus: loadingStatus.none\n    },\n    data() {\n        return {\n            constLoadingStatus: { ...loadingStatus }\n        }\n    },\n    mounted() {\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.claLoadingMoreRoot {\n    text-align: center;\n\n    .claMore {\n        text-align: center;\n        height: 17px;\n        line-height: 17px;\n        margin-top: 24px;\n        font-family: PingFangSC-Medium;\n        font-size: 12px;\n        color: #D9D9D9;\n        letter-spacing: 0;\n        font-weight: 500;\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        align-items: center;\n\n        .claImg {\n            width: 18px;\n            object-fit: cover;\n            margin-right: 8px;\n\n            animation: move 500ms;\n            animation-timing-function: linear; /* easing */\n            animation-iteration-count: infinite;\n            transform: translateY(0px);\n\n            @keyframes move {\n                50% {\n                    transform: translateY(-2.5px);\n                    animation-timing-function: ease-in;\n                }\n                100% {\n                    transform: translateY(-5px);\n                    animation-timing-function: ease-out;\n                }\n            }\n        }\n    }\n}\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=756e3da0&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=756e3da0&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"756e3da0\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <VirtualCollection\n        class=\"global__scroll-style\"\n        :cellSizeAndPositionGetter=\"cellSizeAndPositionGetter\"\n        :collection=\"myItems\"\n        :height=\"height\"\n        :width=\"width\"\n        :scrollToBottomRange=\"bottomNearDistance\"\n        :style=\"{overflowX:showHorizontalSlider?'scroll':'hidden'}\"\n    >\n        <template slot=\"header\">\n            <div class=\"claHeader\">\n                <slot name=\"header\"></slot>\n            </div>\n        </template>\n        <template slot=\"cell\" slot-scope=\"props\">\n            <slot v-bind:data=\"{item:props.data.data,index:props.data.index}\"></slot>\n        </template>\n    </VirtualCollection>\n</template>\n\n<script lang=\"js\">\nimport Vue from 'vue'\n//@ts-ignore\nimport VirtualCollection from 'vue-virtual-collection'\nimport toast from '@/mixins/toast'\nimport { debounce } from 'lodash'\nimport loadingMore from './loadingMore'\nimport { loadingStatus } from '@/components/CollectionView/loadingMore/constant'\n\nVue.use(VirtualCollection)\n\nconst scrollDirection = {\n    up: 0,\n    down: 1,\n    none: -1\n}\n\n\nexport default {\n    name: 'ts-virtual-collection-view',\n    mixins: [toast],\n    props: {\n        items: {\n            type: Array,\n            default: function () {\n                return []\n            }\n        },\n        height: {\n            type: Number,\n            default: 0\n        },\n        width: {\n            type: Number,\n            default: 0\n        },\n        itemSize: {\n            type: Object,\n            default: function () {\n                return {\n                    width: 10,\n                    height: 10\n                }\n            }\n        },\n        // 注:如果默认值是0则自行按宽度来适应\n        columns: {\n            type: Number,\n            default: 5\n        },\n        contentEdgeSet: {\n            type: Object,\n            default: function () {\n                return {\n                    top: 0,\n                    left: 0,\n                    bottom: 0,\n                    right: 0\n                }\n            }\n        },\n        lineSpace: {\n            type: Object,\n            default: function () {\n                return {\n                    vertical: 0,\n                    horizontal: 0\n                }\n            }\n        },\n        showHorizontalSlider: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data() {\n        return {\n            bottomNearDistance: 50, // 像素,滚动接近底部的像素，用于触发loadmore\n            myItems: [],\n            //滚动相关\n            scrollMeasure: {\n                lastScrollTop: 0,\n                scrollDirection: scrollDirection.none\n            },\n            loadingStatus: loadingStatus.none,\n            loadingMoreRef: null\n        }\n    },\n    watch: {\n        columns(val) {\n            //@ts-ignore\n        },\n        items: {\n            handler: function (val) {\n                let arys = []\n                let i = 0\n                for (const it of val) {\n                    arys.push({\n                        data: {\n                            data: it,\n                            index: i\n                        }\n                    })\n                    i++\n                }\n                //@ts-ignore\n                this.myItems = arys\n            },\n            immediate: true\n        },\n        loadingStatus: {\n            handler: function (val) {\n\n            },\n            immediate: false\n        }\n    },\n    mounted() {\n        this.listenScrollEvents(true)\n        this.installLoadingMore(this.$el, { loadingStatus: loadingStatus.loading })\n    },\n    beforeDestroy() {\n        // 手动挂载的组件也要移走，否则内存泄漏\n        this.$el.removeChild(this.loadingMoreRef.$el)\n        this.loadingMoreRef = null\n        this.listenScrollEvents(false)\n    },\n    methods: {\n        installLoadingMore(parentEl, options) {\n            let LoadingMoreConstructor = Vue.extend(loadingMore)\n            const component = (new LoadingMoreConstructor(\n                {\n                    propsData: { ...options }\n                })).$mount()\n            parentEl.appendChild(component.$el)\n            this.loadingMoreRef = component\n            return component\n        },\n        canScroll() {\n            let obj = this.$el\n            if (!obj) {\n                return false\n            }\n            const can = obj.scrollHeight > obj.clientHeight || obj.offsetHeight > obj.clientHeight\n            return can\n        },\n        showLoadingMore(loadingStatus) {\n            this.loadingStatus = loadingStatus\n            this.loadingMoreRef.$props.loadingStatus = loadingStatus\n            let canShowMore = this.canScroll()\n            // 只有滚动时才可以显示没有更多\n            this.loadingMoreRef.$el.style.visibility = canShowMore ? 'visible' : 'hidden'\n        },\n        triggerBottomEvent: debounce(function (event) {\n            this.$emit('scrolled-to-bottom-range', null)\n        }, 100),\n        onScrollEvent(event) {\n            const target = event.target\n            const total = target.scrollHeight - target.offsetHeight\n            let curScrollTop = target.scrollTop\n            const diff = curScrollTop - this.scrollMeasure.lastScrollTop\n            if (diff > 0) { // 向下滚动\n                this.scrollMeasure.scrollDirection = scrollDirection.down\n            } else {\n                this.scrollMeasure.scrollDirection = scrollDirection.up\n            }//\n            console.log(`onScrollEvent...target.scrollTop < total=${target.scrollTop < total},target.scrollTop > (total - this.bottomNearDistance)=${target.scrollTop > (total - this.bottomNearDistance)}`)\n            if (target.scrollTop > (total - this.bottomNearDistance)) {\n                if (this.scrollMeasure.scrollDirection === scrollDirection.down) {\n                    this.triggerBottomEvent(event)\n                }\n            }\n            this.scrollMeasure.lastScrollTop = curScrollTop\n        },\n        listenScrollEvents(isNeed) {\n            let acceptEl = this.$el\n            if (isNeed) {\n                if (acceptEl) {\n                    acceptEl.addEventListener('scroll', this.onScrollEvent)\n                }\n            } else {\n                if (acceptEl) {\n                    acceptEl.removeEventListener('scroll', null)\n                }\n            }\n        },\n        cellSizeAndPositionGetter(item, index) {\n            const col = Math.floor(index % this.columns)\n            const row = Math.floor(index / this.columns)\n            const interColVal = col === 0 ? 0 : this.lineSpace.horizontal\n            const interRowVal = row === 0 ? 0 : this.lineSpace.vertical\n            const width = this.itemSize.width\n            const height = this.itemSize.height\n            let itemRect = {\n                x: col * (width + interColVal) + this.contentEdgeSet.left,\n                y: row * (height + interRowVal),\n                width: this.itemSize.width,\n                height: this.itemSize.height\n            }\n            return itemRect\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.vue-virtual-collection {\n    overflow: scroll;\n\n    .claHeader {\n\n    }\n}\n\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tsVirtualCollectionView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tsVirtualCollectionView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tsVirtualCollectionView.vue?vue&type=template&id=0b46cb5c&scoped=true&\"\nimport script from \"./tsVirtualCollectionView.vue?vue&type=script&lang=js&\"\nexport * from \"./tsVirtualCollectionView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tsVirtualCollectionView.vue?vue&type=style&index=0&id=0b46cb5c&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b46cb5c\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\n// @ts-ignore\nimport { getClientHeight, getClientWidth } from '@/utils/utils'\n\nexport default Vue.extend({\n    data() {\n        return {\n            windowSize: {\n                width: 0,\n                height: 0\n            }\n        }\n    },\n    methods: {\n        resetWindowSize() {\n            this.windowSize = {\n                width: getClientWidth(),\n                height: getClientHeight()\n            }\n        },\n        onWindowResize() {\n            this.resetWindowSize()\n        },\n        listenWinSize(isNeed: boolean) {\n            if (isNeed) {\n                window.addEventListener('resize', this.onWindowResize)\n            } else {\n                window.removeEventListener('resize', this.onWindowResize)\n            }\n        }\n    },\n    mounted() {\n        this.resetWindowSize()\n        this.listenWinSize(true)\n    },\n    beforeDestroy() {\n        this.listenWinSize(false)\n    }\n})\n","<template>\n    <div v-if=\"!isLeave\" class=\"home-item global__scroll-style\"\n         @drop.prevent.stop=\"onDropHanlderWrap($event)\"\n         @dragover.prevent.stop\n         @dragenter.prevent.stop=\"onDropOverHanlderWrap()\"\n         @click=\"selectedAll(false)\"\n    >\n        <div class=\"project-container guideClass1\" ref=\"projectContainerRef\">\n            <ts-virtual-collection-view\n                ref=\"virtualCollectionRef\"\n                :content-edge-set=\"edgSet\"\n                :width=\"collectionViewSize.width\"\n                :height=\"collectionViewSize.height\"\n                :items=\"projectList\"\n                :item-size=\"itemSize\"\n                :columns=\"column\"\n                :line-space=\"lineSpace\"\n                @scrolled-to-bottom-range=\"onScrolledToBottomRange\"\n            >\n                <template v-slot:header>\n                    <h3 class=\"title c-text-primary\" id=\"aaaaaaa\" :style=\"{\n                marginTop:`${titleEdgSet.top}px`,\n                marginLeft:`${titleEdgSet.left}px`,\n                marginRight:`${titleEdgSet.right}px`,\n                marginBottom:`${titleEdgSet.bottom}px`\n            }\">全部项目</h3>\n                </template>\n                <template slot-scope=\"{data}\">\n                    <template v-if=\"data.item.type === 0\">\n                        <el-card\n                            :key=\"data.index\"\n                            shadow=\"hover\"\n                            class=\"box-card\"\n                            :title=\"data.item.name\"\n                            :body-style=\"{ padding: '0px' }\">\n                            <div class=\"add-project c-text-primary\" @click.stop=\"onAddProjectClick()\">\n                                <i class=\"el-icon-plus add-btn\"></i>\n                                <p class=\"add-name\">{{ data.item.name }}</p>\n                            </div>\n                        </el-card>\n                    </template>\n\n                    <template v-else>\n                        <el-card\n                            ref=\"projectCardRef\"\n                            @mousedown.native=\"handleStopMove\"\n                            :key=\"data.index\"\n                            :id=\"data.item.id\"\n                            shadow=\"hover\"\n                            :class=\"{ 'box-card':true, 'box-card-hover':data.index == dragToWhichItem ,'box-card-selected':isSelected(data.item)}\"\n                            :title=\"data.item.name\"\n                            :body-style=\"{ padding: '0px' }\"\n                            @click.native.exact.stop=\"onLeftMouseClick(data.item,data.index)\"\n                            @dblclick.native.exact.stop=\"projectClickHandler(data.index, data.item, 'dblclick')\"\n                            @click.native.right.exact=\"handleNodeContextmenu(data.index,data.item)\"\n                            @drop.native.prevent.stop=\"onDropHanlder(getTransFormedDropPaths(),data.index,data.item)\"\n                            @dragover.native.prevent.stop=\"onDropOverHanlder(data.index)\"\n                            @dragenter.native.prevent.stop=\"onDropOverHanlder(data.index)\"\n                            @dragleave.native.prevent.stop=\"onDropLeaveHanlder(data.index)\"\n\n                            @click.native.meta.stop=\"onCommandLeftMouseClick(true,data.item,data.index)\"\n                            @click.native.ctrl.stop=\"onCommandLeftMouseClick(false,data.item,data.index)\"\n                            @click.native.shift.stop=\"onLeftMouseShiftClick(data.item,data.index)\"\n                        >\n\n                            <template v-if=\"data.item.projectIcon && data.item.projectIcon.length >0\">\n                                <div class=\"custom-image\">\n                                    <template v-if=\"data.item.projectIcon.length === 1\">\n                                        <render-icon\n                                            :icon-param=\"{projectIcon:data.item.projectIcon,index:0}\"></render-icon>\n                                    </template>\n\n                                    <template v-else-if=\"data.item.projectIcon.length === 2\">\n                                        <div class=\"two-box\">\n                                            <render-icon\n                                                :icon-param=\"{projectIcon:data.item.projectIcon,index:0}\"></render-icon>\n                                            <render-icon\n                                                :icon-param=\"{projectIcon:data.item.projectIcon,index:1}\"></render-icon>\n                                        </div>\n                                    </template>\n\n                                    <template v-else>\n                                        <div class=\"three-box\">\n                                            <div class=\"top\">\n                                                <render-icon\n                                                    :icon-param=\"{projectIcon:data.item.projectIcon,index:0}\"></render-icon>\n                                            </div>\n                                            <div class=\"bottom\">\n                                                <render-icon :icon-param=\"{projectIcon:data.item.projectIcon,index:1}\"\n                                                             is-left=\"true\"></render-icon>\n\n                                                <div class=\"bottom-right\">\n                                                    <p v-if=\"data.item.thumbnailCounts > 3\" class=\"count-box\">\n                                                        共{{ data.item.thumbnailCounts || 0 }}张\n                                                    </p>\n                                                    <render-icon\n                                                        :icon-param=\"{projectIcon:data.item.projectIcon,index:2}\"></render-icon>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </template>\n                                </div>\n                            </template>\n\n                            <template v-else>\n                                <div class=\"project-icon\">\n                                    <img class=\"default-icon\"\n                                         :src=\"require('@/assets/icons/workbench_pic_file_empty@3x.png')\">\n                                </div>\n                            </template>\n\n\n                            <div class=\"project-info\">\n                                <div\n                                    ref=\"itemName\"\n                                    class=\"project-name\"\n                                >\n                                    {{ (data.item.name || '') | filterFormatName }}\n                                </div>\n                                <div class=\"project-time c-text-label\">\n                                    更新时间：{{\n                                        data.item.update_time | moment('timezone', 'Asia/Shanghai', 'MM月DD日 HH:mm')\n                                    }}\n                                </div>\n                            </div>\n                        </el-card>\n                    </template>\n                </template>\n            </ts-virtual-collection-view>\n        </div>\n\n        <opt-project-dialog @mousedown.native.stop @onAddedProject=\"onAddedProjectCallback\"\n                            v-model=\"showResetProjectName\"/>\n        <importProgressDialog\n            :importFilePaths=\"importFilePaths\"\n            @mousedown.native.stop\n            :status=\"importProgress.status\"\n            :data=\"importProgress\"\n            :importName=\"myImportName\"\n            v-model=\"showImportProgress\"\n            @onCancelled=\"handleCancelImport\"\n        >\n        </importProgressDialog>\n        <renameProjectDialog\n            @mousedown.native.stop\n            :value=\"showRenameDialog\"\n            @onClose=\"showRenameDialog = false\"\n            :text=\"inputRenameText\"\n            @onConfirm=\"onRenameConfirm\"\n        >\n        </renameProjectDialog>\n        <delete-progress-dialog\n            @mousedown.native.stop\n            :isDeleteProject=\"true\"\n            :status=\"deleteProgress.status\"\n            :data=\"deleteProgress\"\n            v-model=\"showDeleteProgress\">\n        </delete-progress-dialog>\n    </div>\n</template>\n<script>\nimport { defineComponent } from 'vue'\nimport { mapGetters, mapActions, mapMutations } from 'vuex'\nimport { find } from '@/universal/datastore/dictionaryDao'\n\n\nimport toast from '@/mixins/toast'\nimport tsFileImport from '@/mixins/tsFileImport'\n\nimport Project from '../../model/ProjectModel.ts'\n\nimport {THUMBNAIL_TABLE, SHOWED_NOVICE_GUIDE, PROJECT_TABLE, CLIENT_NAME} from '@/universal/types/config'\nimport { BatchActiveMode } from '@/constants/batchRetouchDef.ts'\nimport { ImportProgressStatus } from '@/constants'\n\nimport { formatString } from '@/utils/utils'\n\nimport DBIpcRender from '@/irender/DBIpcRender'\n\nimport { Card } from 'element-ui'\nimport ImportProgressDialog from '@/views/BatchRetouch/components/ImportProgressDialog'\nimport optProjectDialog from '@/views/Home/components/optProjectDialog'\nimport FileUtils from '@/utils/FileUtils'\nimport renameProjectDialog from '@/views/Home/components/renameProjectDialog'\nimport { batchDeleteProjects } from '@/mixins/projects/batchDeleteProject'\nimport { batchSelectsProject } from '@/mixins/projects/batchSelectsProject'\nimport TsVirtualCollectionView from '@/components/CollectionView/tsVirtualCollectionView'\nimport resizeMixin from '@/mixins/reactive/resizeMixin'\nimport store from '@/store'\nimport { loadingStatus } from '@/components/CollectionView/loadingMore/constant'\nimport { countSince } from '#/datastore/projectDao'\nimport { debounce } from 'lodash'\nimport tsFilePathUtils from '@/utils/tsFilePathUtils'\nimport noviceGuideMixin from '@/mixins/noviceGuideMixin'\nimport NodeApi from '@/qt-ipc/node-api'\nimport fs from '@/qt-ipc/fs'\nimport path from '@/qt-ipc/path'\nimport { ShareObjectModel } from '#/model/ShareObjectModel/ShareObjectModel'\nimport Menu from '@/qt-ipc/utils/menu'\nimport ipcRenderer from '@/qt-ipc/Ipc-renderer'\nimport useHomeItemPointsRepositories from '@/composables/points/useHomeItemPointsRepositories'\n\nlet fileProtocol = process.env.VUE_APP_ENV == 'dev' ? 'tsFile' : 'file'\nlet workSpacePath = null\nlet fileExistMap = new Map()\n\nexport default defineComponent({\n    mixins: [toast,\n        tsFileImport,\n        batchSelectsProject, batchDeleteProjects, resizeMixin, noviceGuideMixin],\n    components: {\n        TsVirtualCollectionView,\n        'el-card': Card,\n        optProjectDialog,\n        ImportProgressDialog,\n        renameProjectDialog,\n        'render-icon': {\n            props: {\n                isLeft: false,\n                iconParam: {\n                    type: Object,\n                    default: function () {\n                        return {\n                            projectIcon: null,\n                            index: null\n                        }\n                    }\n                }\n            },\n            data() {\n                return {\n                    iconPath: null,\n                    iconExist: null\n                }\n            },\n            watch: {\n                'iconParam': {\n                    handler: function (val) {\n                        this.getFullPath().then(filePath => {\n                        })\n                    },\n                    immediate: false\n                }\n            },\n            methods: {\n                async getFullPath() {\n                    const { projectIcon, index } = this.iconParam\n                    if (!projectIcon) {\n                        return null\n                    }\n                    let curPath = projectIcon[index]\n                    if (!curPath) {\n                        return null\n                    }\n                    let isWin32 = `${process.platform}` === 'win32'\n                    // 是绝对路径的提前返回\n                    if (isWin32) {\n                        // win32的以:/开头是绝对路径\n                        let prefix = ':' + path.sep\n                        if (curPath.indexOf(prefix) > 0) {\n                            return curPath\n                        }\n                    } else {\n                        if (curPath.startsWith('/')) {\n                            return curPath\n                        }\n                    }\n\n                    if (!workSpacePath){\n                        workSpacePath = await tsFilePathUtils.getAppRootPath();\n                        if (!workSpacePath.endsWith('/')){\n                            workSpacePath = workSpacePath +\"/\"\n                        }\n                    }\n                    const strAbsoluteIconPath = workSpacePath +curPath\n                    let isExist = fileExistMap.get(strAbsoluteIconPath)\n\n                    if (isExist === undefined || isExist === null){\n                        isExist = await FileUtils.isFileExist(strAbsoluteIconPath)\n                        fileExistMap.set(strAbsoluteIconPath,isExist)\n                    }\n                    this.iconExist = isExist\n                    if (this.iconExist) {\n                        let fileUrl = `${fileProtocol}://${FileUtils.encodeURIComponent(strAbsoluteIconPath)}`\n                        this.iconPath = fileUrl\n                    }\n                    return this.iconPath\n                }\n            },\n            render: function (h) {\n                if (!this.iconPath) {\n                    return <div></div>\n                }\n                if (this.iconExist) {\n                    return <img src={this.iconPath} class={this.isLeft ? 'img bottom-left' : 'img'}/>\n                }\n                return <div class={this.isLeft ? 'claFmt bottom-left' : 'claFmt'}>\n                    <span class=\"claText\" style=\"color: #4D4D4D;font-size: 10px\">此文件无法预览</span>\n                </div>\n            },\n            async mounted() {\n                await this.getFullPath()\n            }\n        }\n    },\n    setup() {\n        const { PointClickProject, PointHomeItem } = useHomeItemPointsRepositories()\n\n        return {\n            PointClickProject,\n            PointHomeItem\n        }\n    },\n    data() {\n        return {\n\t\t\tCLIENT_NAME,\n            isLeave:false,\n            inputRenameText: null,\n            clickTimer: null,\n            exportTimer: null,\n            showResetProjectName: false,\n            loadingEl: null,\n            fileNameChangeFlagIndex: null,\n            chooseItem: false,\n            showImportProgress: false,\n            showRenameDialog: false,\n            importProgress: {},\n            dragToWhichItem: null, //Which one to drag to\n            collectionViewSize: { width: 0, height: 0 },\n            itemSize: { width: 234, height: 238 },\n            column: 1,\n            // 批量获取的最后一条记录的时间\n            lazyLoadObj: {\n                ratio: 3, // 倍率，按需加载的倍数,上下拖动滚动时\n                pageCount: 0,// 需做响应式计算,加载数量\n                singlePageCount: 0 //单页数量\n            },\n            edgSet: { top: 40, bottom: 40, right: 92, left: 100 },\n            titleEdgSet: { top: 40, bottom: 16, right: 92, left: 100 },\n            lineSpace: {\n                vertical: 40,\n                horizontal: 20\n            },\n            importFilePaths: []\n        }\n    },\n    filters: {\n        filterFormatName: formatString\n    },\n    async mounted() {\n        //获取内存不足\n        let result = await ipcRenderer.send('check_less_memory', {})\n        console.log('check less memory result is: ',result)\n        if(result['isShow']){\n          this.tsConfirm({\n            title: null,\n            customTitleEl: `检测到${CLIENT_NAME}因您的电脑内存不足导致异常退出，建议您先退出其他软件释放内存或者重启电脑，以便您能够正常使用${CLIENT_NAME}`,\n            customMessageStyle: 'textAlign: left',\n            showCancelButton: false,\n            confirmButtonText: '确定'\n          }).catch(err =>{console.log(err)})\n        }\n\n        // 预设展开逻辑\n        this.$store.commit('removeALlPresetDefaultExpendKey') //清空默认展开预设\n        this.$store.commit('setIsExpandFirstPhoto', true)\n        this.resetCollectionViewDisplayItems()\n        this.$store.dispatch('project/ACT_GetBatchProjects', {\n            rowUpdateTime: null,\n            pageCount: this.lazyLoadObj.pageCount\n        }).then(() => { // 改为只在进入的第一次来排序\n            this._SortProjectsWithUpdateTime()\n        })\n\n        this.installShortcuts()\n        // 预下载预设\n        let userId = this.$store.state.user.userId\n        this.loadAllPresents({ userId, forceReload: true })\n\n        // 判断是否开启新手引导\n        const res = await find(SHOWED_NOVICE_GUIDE)\n        if (res) {\n            this._SetIsShowNoviceGuide(false)\n        } else {\n            // this._SetIsShowNoviceGuide(true)\n            this._SetIsShowNoviceGuide(false)   // 暂时屏蔽新手引导\n        }\n        this.showGuide(1, 'guideClass1')\n    },\n    beforeMount() {\n\n    },\n    beforeDestroy() {\n        fileExistMap.clear()\n        this.showResetProjectName = false\n        this.removeShortcuts()\n    },\n    computed: {\n        ...mapGetters('project', [\n            'projects',\n            'previewRouterName'\n        ]),\n        ...mapGetters([\n            'userId'\n        ]),\n        ...mapGetters('config', [\n            'isShowNoviceGuide',\n            'importNoNavigate'\n        ]),\n        projectList() {\n            const preProject = new Project(null, '创建新项目')\n            const preArr = [preProject]\n            const list = this.projects || []\n            console.log('list -----  : ' + list.length)\n            return preArr.concat(list)\n        },\n        lastRowUpdateTime() {\n            const list = this.projects\n            if (!list || list.length === 0) {\n                return\n            }\n            let lastProj = list[this.projects.length - 1]\n            return lastProj.update_time\n        }\n    },\n    async created() {\n        if (this.exportTimer == null) {\n            this.exportTimer = setTimeout(async () => {\n\n                let isOnline = await window.$net.isOnline()\n                if (isOnline) {\n                    this.asyncInitExportData()\n                }\n            }, 500)\n        }\n    },\n    watch: {\n        // 监听混入的resizeMixin里面的windowsize的变化\n        windowSize: {\n            handler: debounce(async function (val) {\n                this.resetCollectionViewDisplayItems()\n                await this.loadNext(this.lazyLoadObj.singlePageCount)\n            }, 1),\n            immediate: true\n        },\n        showRenameDialog: {\n            handler: function (val, old) {\n                //BugFix:1. 编辑出现时，需要屏蔽全局快捷键，避免影响编辑框的复制和黏贴 2. 编辑消失恢复全局快捷键\n                if (val) {\n                    this.unregisterShortcut()\n                } else {\n                    this.registerShortcut()\n                }\n            },\n            immediate: false\n        },\n        showResetProjectName: {\n            handler: function (val, old) {\n                //BugFix:1. 编辑出现时，需要屏蔽全局快捷键，避免影响编辑框的复制和黏贴 2. 编辑消失恢复全局快捷键\n                if (val) {\n                    this.unregisterShortcut()\n                } else {\n                    this.registerShortcut()\n                }\n            },\n            immediate: false\n        }\n    },\n    methods: {\n        ...mapActions(['asyncInitExportSetting', 'loadAllPresents']),\n        ...mapActions(['asyncInitExportData']),\n\n        ...mapMutations('thumbnail', ['_SetThumbnails']),\n\n        ...mapMutations('project', ['_SetActiveProjectId', '_SortProjectsWithUpdateTime']),\n        ...mapMutations('config', ['_SetIsShowNoviceGuide']),\n\n        ...mapActions('project', [\n            'ACT_InsertProject',\n            'ACT_UpdateProject',\n            'ACT_DeleteProject'\n        ]),\n\n        ...mapActions('thumbnail', [\n            'ACT_GetThumbnails'\n        ]),\n        getTransFormedDropPaths() {\n            let dropPaths = window.$dragFiles\n            let dropPathArray = []\n            for (const it of dropPaths) {\n                dropPathArray.push(it.path)\n            }\n            return dropPathArray\n        },\n        resetCollectionViewDisplayItems() {\n            const projectContainerRef = this.$refs['projectContainerRef']\n            if (!projectContainerRef) {\n                return\n            }\n            this.collectionViewSize = projectContainerRef.getBoundingClientRect()\n\n            // 计算该请求的分页单次count的数量\n            const intervalPadding = 10 // 格子间的间隔\n            const ratio = this.lazyLoadObj.ratio\n            const effectWidth = this.collectionViewSize.width - this.edgSet.left - this.edgSet.right\n            const col = Math.floor(effectWidth / (intervalPadding + this.itemSize.width))\n            const row = Math.round(this.collectionViewSize.height / (intervalPadding + this.itemSize.height))\n            this.lazyLoadObj.singlePageCount = Math.round(col * row)\n            this.lazyLoadObj.pageCount = Math.round(ratio * col * row)\n            console.log(`onWindowResize:this.lazyLoadObj.pageCount=${this.lazyLoadObj.pageCount}`)\n            this.column = col\n        },\n        async onRenameConfirm(name) {\n            if (name == null || name.length == 0) {\n                this.tsNotify({\n                    type: 'error',\n                    message: '文件名称不能为空！'\n                })\n                return\n            }\n            const project = this.projects[this.fileNameChangeFlagIndex - 1]\n\n            //命名如果没改变，直接返回\n            if (name === project.name) {\n                this.fileNameChangeFlagIndex = null\n                this.showRenameDialog = false\n                return\n            }\n\n            //更新数据库\n            await this.ACT_UpdateProject({\n                id: project.id,\n                modify: {\n                    visit_time: +new Date(),\n                    name: name\n                }\n            })\n\n            const projectNameEl = this.getProjectNameElByIndex(this.fileNameChangeFlagIndex)\n            projectNameEl.innerText = formatString(name)\n            this.fileNameChangeFlagIndex = null\n            this.showRenameDialog = false\n            this.tsNotify({\n                message: '重命名成功！'\n            })\n        },\n        handleStopMove(e) {\n            e.preventDefault()\n        },\n        loadError() {\n            console.log('==》 加载失败')\n        },\n        onAddedProjectCallback(project) {\n            const list = this.projects\n            const len = list.length\n            this.onProjectClick(len, project)\n        },\n        onAddProjectClick() {\n            // 新手引导时，禁用新建项目按钮\n            if (this.isShowNoviceGuide) {\n                return\n            }\n            let goNext = async () => {\n                let isOnline = await window.$net.isOnline()\n                if (isOnline) {\n                    this.showResetProjectName = true\n                    this.PointHomeItem('add_new_project')\n                    // this.$tsStat?.event('cake_workbench', {\n                    //     cake_operate: 'add_new_project'\n                    // })\n                } else {\n                    this.tsNotify({\n                        type: 'error',\n                        message: '当前无网络'\n                    })\n                }\n            }\n            this.$root.checkDiskSpaceIfNeed(() => {\n                goNext()\n            }).then(isNoSpace => {\n                if (!isNoSpace) {\n                    goNext()\n                }\n            })\n        },\n\n        // 区分项目单机、双击事件\n        projectClickHandler(index, item, type) {\n            if (type === 'dblclick') {\n                if (this.clickTimer) clearTimeout(this.clickTimer)\n                this.onProjectClick(index, item)\n                this.PointClickProject(item.thumbnailCounts)\n                // this.$tsStat?.event('cake_workbench', {\n                //     cake_operate: 'click_project',\n                //     cake_number: item.thumbnailCounts\n                // })\n            } else {\n                if (this.clickTimer) clearTimeout(this.clickTimer)\n                this.clickTimer = setTimeout(_ => {\n                    this.onProjectClick(index, item)\n                    this.PointClickProject(item.thumbnailCounts)\n                    // this.$tsStat?.event('cake_workbench', {\n                    //     cake_operate: 'click_project',\n                    //     cake_number: item.thumbnailCounts\n                    // })\n                }, 300)\n            }\n        },\n\n        async onProjectClick(index, item) {\n            this._SetThumbnails([])\n            const idx = index - 1\n            this._SetActiveProjectId(item.id)\n            await ShareObjectModel.instance().setCurrentProjectId(item.id)\n            this.ACT_UpdateProject({\n                id: item.id,\n                modify: {\n                    visit_time: +new Date()\n                }\n            })\n\n\n            let routeName\n            let routeParam = {}\n\n            if (item.path && item.path.length > 0) {\n                if (item.path.length == 1 && item.path[0] == '') {\n                    routeName = 'project'\n                } else {\n                    routeName = this.previewRouterName\n                }\n            } else {\n                routeName = 'project'\n            }\n\n            this.isLeave = true\n            this.$router.push({\n                name: routeName,\n                query: {\n                    index: idx,\n                    ...routeParam\n                }\n            })\n\n        },\n\n        onImportFileClick(index) {\n            this.tsConfirm({\n                title: '系统提示',\n                message: '该项目关联的文件不存在，请重新导入文件',\n                showCancelButton: false\n            }).then(_ => {\n                // 处理删除工程缓存\n                this.loadingEl = this.$loading({\n                    lock: true,\n                    text: '正在删除工程数据中',\n                    background: 'rgba(0, 0, 0, 0.5)'\n                })\n                let project = this.projects[index]\n                this.clearProject(project, index).then(res => {\n                    if (this.loadingEl) {\n                        this.loadingEl.close()\n                        this.loadingEl = null\n                    }\n                    this.$router.push({\n                        name: 'project',\n                        query: {\n                            index\n                        }\n                    })\n                }).catch(e => {\n                    if (this.loadingEl) {\n                        this.loadingEl.close()\n                        this.loadingEl = null\n                    }\n                    console.error(e)\n                })\n            })\n        },\n        async clearProject(project) {\n            try {\n                // 删除数据库记录\n                await DBIpcRender.delete(THUMBNAIL_TABLE, 'projectId', project.id)\n                await this.ACT_AsyncUpdateProject(\n                    {\n                        id: project.id,\n                        path: null,\n                        thumbnailPaths: null,\n                        importTimes: 0,\n                        thumbnailNumber: 0\n                    }\n                )\n                // 删除目录缓存\n                this.deleteProjectCache(project)\n            } catch (e) {\n                console.error(e)\n                return Promise.reject(e)\n            }\n        },\n        isProjectExist(project) {\n            if (project.path == null || project.path.length == 0) {\n                return false\n            }\n            let res = true\n            for (let i = 0; i < project.path.length; i++) {\n                if (!FileUtils.isFileExist(project.path[i])) {\n                    res = false\n                    return res\n                }\n            }\n            return res\n        },\n        // 滚动到底部触发的事件\n        async onScrolledToBottomRange() {\n            await this.loadNext()\n        },\n        // 加载下一批\n        async loadNext(pageCount) {\n            let virtualCollectionRef = this.$refs['virtualCollectionRef']\n            if (!virtualCollectionRef) {\n                return Promise.reject('the virtualCollectionRef is empty!!!')\n            }\n            try {\n                let preLastRowUpdateTime = this.lastRowUpdateTime\n                let status = loadingStatus.loading\n                virtualCollectionRef.showLoadingMore(status)\n                await this.$store.dispatch('project/ACT_GetBatchProjects', {\n                    rowUpdateTime: this.lastRowUpdateTime,\n                    pageCount: pageCount ? pageCount : this.lazyLoadObj.pageCount\n                })\n                status = this.lastRowUpdateTime === preLastRowUpdateTime ? loadingStatus.totalEnd : loadingStatus.finished\n                if (status === loadingStatus.finished) {\n                    const count = await countSince(this.userId, this.lastRowUpdateTime)\n                    if (!count) {\n                        status = loadingStatus.totalEnd\n                    }\n                }\n                console.log(`onScrolledToBottomRange:`, status === loadingStatus.totalEnd ? '加载到底了!!!' : '单次加载成功了!!!')\n                virtualCollectionRef.showLoadingMore(status)\n            } catch (e) {\n                console.log(`onScrolledToBottomRange has error`, e)\n            }\n        },\n        // 从+开始\n        getProjectNameElByIndex(projectIndex) {\n            if (!this.$refs.virtualCollectionRef) {\n                return null\n            }\n            const cardVueRef = this.$refs.virtualCollectionRef.$children[0].$children[projectIndex]\n            if (!cardVueRef) {\n                return null\n            }\n            const el = cardVueRef.$el.getElementsByClassName('project-name')[0]\n            return el\n        },\n        /**\n         * 右键菜单\n         * @param data\n         */\n        async handleNodeContextmenu(idx, paramData) {\n            const projectNameEl = this.getProjectNameElByIndex(idx)\n            if (this.fileNameChangeFlagIndex !== null && projectNameEl && projectNameEl.innerText.length === 0) {\n                this.div.focus()\n                return\n            } else {\n                this.showContextMenu()\n                const menu = new Menu()\n                if (this.selectProjects.size <= 1) {\n                    menu.push({\n                        label: '重命名',\n                        action: 'home__project-rename',\n                        disabled: false,\n                        data: paramData,\n                        callback: (data) => {\n                            this.inputRenameText = data.name\n                            this.showRenameDialog = true\n                            this.fileNameChangeFlagIndex = idx\n                        }\n                    })\n                }\n\n\n\n                if (this.selectProjects.size > 1) {\n                    menu.push({\n                        label: '批量删除',\n                        action: 'home__project-batch-delete',\n                        disabled: false,\n                        data: this.selectProjects,\n                        callback: this.batchRemove\n                    })\n                }\n                else\n                {\n                    menu.push({\n                        label: '删除',\n                        action: 'home__project-delete',\n                        disabled: false,\n                        data: paramData,\n                        callback: this.remove\n                    })\n                }\n\n                menu.show((action) => {\n                    this.onContextMenuItemClick(action)\n                })\n            }\n        },\n        // 拖动到已有项目\n        onDropOverHanlder(idx) {\n            this.dragToWhichItem = idx\n        },\n        onDropLeaveHanlder(idx) {\n            this.dragToWhichItem = null\n        },\n        onDropHanlder: debounce(async function (paths, idx, item) {\n\t\t\t// 创建的是空的文件项目要判断这个条件(item.path.length ==1 && item.path[0] === '')\n\t\t\tlet isAppend = !(!item\n\t\t\t\t|| !item.path\n\t\t\t\t|| item.path.length === 0\n\t\t\t\t|| (item.path.length === 1 && item.path[0] === ''))\n\n            if ( isAppend && !this.checkCanImport()) {\n                return\n            }\n            const projectId = item.id\n            const projectName = item.name\n\n            this.chooseItem = true\n            this._SetActiveProjectId(item.id)\n            await ShareObjectModel.instance().setCurrentProjectId(item.id)\n            this.dragToWhichItem = null\n\n\n            // this.importFilePaths = paths\n            await this.importImagesOnHome(paths, isAppend, (thumbnailCount) => {\n                if (this.importNoNavigate){\n                    return\n                }\n                this.$router.push({\n                    name: this.previewRouterName,\n                    query: {\n                        'thumbnailCount': thumbnailCount,\n                        'activeMode': BatchActiveMode.PALETTE,\n                        'scrollToIndex': isAppend,\n                        'isfromHome': true\n                    }\n                })\n            }, progress => {\n                // console.log(`ImportProgressStatus.Start content = `, progress)\n                if (progress.status === ImportProgressStatus.Start) {\n                    this.showImportProgress = true\n                }\n                if ((progress.status === ImportProgressStatus.ImportEmpty) && item === null) {\n                    this.ACT_DeleteProject(this.projects[idx - 1].id)\n                }\n                this.importProgress = progress\n\n            })\n        }, 1000),\n\n        //拖动新建项目\n        onDropOverHanlderWrap() {\n            this.chooseItem = false\n        },\n        convertDataTransferFiles(dataTransferFiles) {\n            const files = [...dataTransferFiles]\n            let paths = []\n            for (let file of files) {\n                let fp = file.path\n                paths.push(fp)\n            }\n            return paths\n        },\n        async onDropHanlderWrap(event) {\n            let goNext = async (transferFiles) => {\n                if (this.chooseItem === false) {\n                    if (!this.checkCanImport()) {\n                        return\n                    }\n                    //创建新项目\n                    try {\n\n\t\t\t\t\t\tthis.bIsCancelImport = false\n\t\t\t\t\t\tthis.importProgress = {}\n\n                        const files = transferFiles\n                        let paths = []\n                        for (let file of files) {\n                            let fp = file.path\n                            paths.push(fp)\n                        }\n\n                        const checkRet = await this.hasReadWritePermission(paths)\n                        if (checkRet.result !== 1) {\n                            this.toastNoReadWritePermission(checkRet)\n                            return\n                        }\n                        this.showImportProgress = true\n                        this.needDeleteImportProject = true\n\n                        const filePathName = files[0].path\n                        const statRet = await fs.statSync(filePathName)\n                        let isFile = statRet.isFile()//是文件\n                        let name = files[0].name\n                        if (isFile) { // 文件则过滤掉扩展名，文件夹则不需要\n                            const extentName = await NodeApi.path.extname(name)\n                            name = name.replace(extentName, '')\n                        }\n                        const newProjectInfo = new Project(this.userId, name, null)\n                        newProjectInfo.visit_time = new Date().getTime()\n\t\t\t\t\t\tif (this.bIsCancelImport){\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet project = {}\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tproject = await this.ACT_InsertProject(newProjectInfo)\n\t\t\t\t\t\t}catch (e) {\n\t\t\t\t\t\t\tthis.tsNotify({\n\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\tmessage: e.message\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tif (!project.id){ // 请求不到project的id则关闭导入对话框\n\t\t\t\t\t\t\tthis.showImportProgress = false\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\n                        if (this.bIsCancelImport){\n\t\t\t\t\t\t\tawait DBIpcRender.delete(PROJECT_TABLE, 'id',project.id)\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\n                        let index = 1\n                        this.onDropHanlder(paths, index, project)\n                    } catch (err) {\n                        this.tsNotify({\n                            type: 'error',\n                            message: err.message\n                        })\n                    }\n                }\n            }\n            let transferFiles = [...this.getDropPaths()]//[...event.dataTransfer.files]\n            // window.$dragFiles = []\n            this.$root.checkDiskSpaceIfNeed(() => {\n                goNext(transferFiles)\n            }).then(isNoSpace => {\n                if (!isNoSpace) {\n                    goNext(transferFiles)\n                }\n            })\n            this.guideQuit('guideClass1')\n        }\n    }\n})\n</script>\n<style lang=\"scss\" scoped>\n[contenteditable]:focus {\n    outline: none;\n}\n\n$smallFontSize: 14px;\n$largerFontSize: 18px;\n$miniFontSize: 12px;\n\n.home-item {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n    //padding: 40px 80px;\n    box-sizing: border-box;\n    //overflow-y: overlay;\n\n    .title {\n        font-size: $largerFontSize;\n        line-height: 32px;\n        font-weight: 500;\n        margin: 0;\n    }\n\n    .project-container {\n        display: flex;\n        flex-wrap: wrap;\n        margin-bottom: 40px;\n        height: 100%;\n\n        .box-card-hover {\n            transform: scale(1.1);\n        }\n\n        .box-card {\n            padding: 0;\n            width: 232px;\n            height: 238px;\n            font-size: 0;\n            flex-shrink: 0;\n            border-radius: 8px;\n            border: 1px solid transparent;\n\n            .project-icon {\n                height: 178px;\n                width: 100%;\n                object-fit: cover;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n\n                .default-icon {\n                    width: 79px;\n                    height: 85px;\n                }\n            }\n\n            .custom-image {\n                height: 178px;\n\n                .img {\n                    width: 100%;\n                    height: 100%;\n                    object-fit: cover;\n                }\n\n                .claFmt {\n                    width: 100%;\n                    height: 100%;\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                }\n\n                .claText {\n                    color: white;\n                    font-size: 12px;\n                }\n\n                .two-box {\n                    display: flex;\n                    width: 100%;\n\n                    .img {\n                        height: 178px;\n                        width: 50%;\n                    }\n\n                    .claFmt {\n                        width: 50%;\n                        height: 178px;\n                    }\n                }\n\n                .three-box {\n                    display: flex;\n                    flex-direction: column;\n\n                    .top {\n                        height: 109px;\n                    }\n\n                    .bottom {\n                        height: 61px;\n                        display: flex;\n\n                        &-left {\n                            width: 125px;\n                            flex: 1;\n                            flex-shrink: 0;\n                        }\n\n                        &-right {\n                            flex: 1;\n                            width: auto;\n                            position: relative;\n\n                            .count-box {\n                                width: 100%;\n                                height: 100%;\n                                position: absolute;\n\n                                display: flex;\n                                align-items: center;\n                                justify-content: center;\n                                background: rgba(0, 0, 0, 0.80);\n                                font-size: 12px;\n                                font-weight: bold;\n\n                            }\n                        }\n                    }\n                }\n            }\n\n            .project-info {\n                box-sizing: border-box;\n                padding: 10px 11px;\n                width: 100%;\n\n                .project-name, .project-time {\n                    margin: 1px;\n                    height: 20px;\n                    overflow: hidden;\n                    font-size: $miniFontSize;\n                    line-height: 20px;\n                    white-space: nowrap;\n                }\n\n                .project-time {\n                    width: 210px;\n                }\n\n                .project-name {\n                    display: inline-block;\n                    max-width: 210px;\n\n                    &.active {\n                        background: #265ccc;\n                    }\n                }\n\n                .changeInput {\n                    width: 100px;\n\n                    .el-input--small .el-input__inner {\n                        height: 10px;\n                    }\n\n                }\n            }\n\n            .add-project {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                height: 238px;\n\n                .add-btn {\n                    width: 30px;\n                    height: 30px;\n                    font-size: 30px;\n                    margin-bottom: 8px;\n                }\n\n                .add-name {\n                    font-size: $smallFontSize;\n                    line-height: 22px;\n                }\n            }\n\n            &.box-card-selected {\n                border-color: #ededed;\n            }\n        }\n\n    }\n}\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home-item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home-item.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home-item.vue?vue&type=template&id=6feaecfc&scoped=true&\"\nimport script from \"./Home-item.vue?vue&type=script&lang=js&\"\nexport * from \"./Home-item.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home-item.vue?vue&type=style&index=0&id=6feaecfc&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6feaecfc\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"home-index\">\n        <home-view/>\n    </div>\n</template>\n<script>\nimport HomeView from './Home-item'\n\nexport default {\n    name: 'HomeIndex',\n    components: {\n        HomeView\n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n.home-index {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=40f2a119&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=40f2a119&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"40f2a119\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home-item.vue?vue&type=style&index=0&id=6feaecfc&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=756e3da0&prod&scoped=true&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tsVirtualCollectionView.vue?vue&type=style&index=0&id=0b46cb5c&prod&scoped=true&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=40f2a119&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./swipeChooseOp.vue?vue&type=style&index=0&id=32de148b&prod&scoped=true&lang=css&\"","import {CLIENT_NAME} from \"@/universal/types/config\";\n\nexport const noviceGuide = {\n    totalStep: 6,\n    step1: {\n        text: `试试直接拖拽文件夹或多张图片到这里，开始探索${CLIENT_NAME}吧~`,\n        num: 1\n    },\n    step2: {\n        text: '点击应用预设',\n        num: 2\n    },\n    step3: {\n        text: '拖动滑杆调整图片',\n        num: 3\n    },\n    step4: {\n        text: '按住shift选中图片',\n        num: 4\n    },\n    step5: {\n        text: '将当前调整应用至选中图片',\n        num: 5\n    },\n    step6: {\n        text: '不需要等待全部效果加载完毕，就可以直接导出',\n        num: 6\n    }\n}\n","//@ts-ignore\nimport Vue from 'vue'\nimport { noviceGuide } from '@/constants/noviceGuide'\n// @ts-ignore\nimport toast from '@/mixins/toast'\nimport { mapGetters, mapMutations, mapActions } from 'vuex'\nimport DBIpcRender from '@/irender/DBIpcRender'\n// @ts-ignore\nimport { find } from '@/universal/datastore/dictionaryDao'\nimport { APP_VERSION } from '@/universal/types/config'\nimport pointsMixin from '@/mixins/pointsMixin'\n\nimport {\n    DICTIONARY_TABLE,\n    SHOWED_NOVICE_GUIDE\n} from '@/universal/types/config'\n\nclass noviceGuideUtil {\n    actionableStyle: string\n    bgStyle: string\n    myBg: any\n\n\n    constructor() {\n        this.actionableStyle = 'background: transparent;z-index: 501;position: relative;'\n        this.bgStyle = 'background: #000;width: 100%;height: 100%;position: absolute;top: 0;left: 0;z-index: 500;opacity: 0.4;filter: Alpha(opacity=30)'\n    }\n\n    /**\n     * 默认遮罩层（bgStyle）\n     */\n    addMask() {\n        this.myBg = <HTMLImageElement>document.createElement('div')\n        this.myBg.setAttribute('style', this.bgStyle)\n        document.body.appendChild(this.myBg)\n    }\n\n    addActionable(className: string) {\n        let myAlert = document.getElementsByClassName(className)[0]\n        myAlert ? myAlert.setAttribute('style', this.actionableStyle) : ''\n    }\n\n    removeMask() {\n        document.body.removeChild(this.myBg)\n    }\n\n\n    showGuide(step: any, className: string) {\n        this.addActionable(className)\n    }\n\n    close() {\n        this.removeMask()\n    }\n}\n\ninterface iData {\n    step: number,\n    guidMask: any,\n    tempDiv: any,\n}\n\n// template（工作台）\nconst tempStep1 = Vue.extend({\n    template: `<div class=\"tempStep1\"><div style=\"width:296px\" class=\"tempStep_textBox\"><p>${ noviceGuide.step1.text }</p><span id=\"guideQuit\">退出(${ noviceGuide.step1.num }/${ noviceGuide.totalStep })</span></div></div>`\n})\n// template（点击运用预设）\nconst tempStep2 = Vue.extend({\n    template:\n        `<div class=\"tempStep2\">\n        <div style=\"width:136px\" class=\"tempStep_textBox\">\n            <p>${ noviceGuide.step2.text }</p>\n            <span id=\"guideQuit\">退出(${ noviceGuide.step2.num }/${ noviceGuide.totalStep })</span>\n        </div>\n        <span class=\"tempStep2-line\"></span>\n        <span class=\"tempStep2-dotted\"></span>\n        <span class=\"tempStep2-circle\"></span>\n    </div>`\n})\n// template（拖动滑杆调整）\nconst tempStep3 = Vue.extend({\n    template:\n        `<div class=\"tempStep3\">\n        <div style=\"width:168px\" class=\"tempStep_textBox\">\n            <p>${ noviceGuide.step3.text }</p>\n            <span id=\"guideQuit\">退出(${ noviceGuide.step3.num }/${ noviceGuide.totalStep })</span>\n        </div>\n        <span class=\"tempStep3-line\"></span>\n        <span class=\"tempStep3-dotted\"></span>\n        <span class=\"tempStep3-circle\"></span>\n    </div>`\n})\n// template（精修左侧图片列表多选）\nconst tempStep4 = Vue.extend({\n    template:\n        `<div class=\"tempStep4\">\n        <span class=\"tempStep4-circle\"></span>\n        <span class=\"tempStep4-line\"></span>\n        <span class=\"tempStep4-dotted\"></span>\n        <div style=\"width:170px\" class=\"tempStep_textBox\">\n            <p>${ noviceGuide.step4.text }</p>\n            <span id=\"guideQuit\">退出(${ noviceGuide.step4.num }/${ noviceGuide.totalStep })</span>\n        </div>\n    </div>`\n})\n// template（同步到选中图片）\nconst tempStep5 = Vue.extend({\n    template:\n        `<div class=\"tempStep5\">\n        <div style=\"width:232px\" class=\"tempStep_textBox\">\n            <p>${ noviceGuide.step5.text }</p>\n            <span id=\"guideQuit\">退出(${ noviceGuide.step5.num }/${ noviceGuide.totalStep })</span>\n        </div>\n        <span class=\"tempStep5-line\"></span>\n        <span class=\"tempStep5-dotted\"></span>\n        <span class=\"tempStep5-circle\"></span>\n\n    </div>`\n})\n// template（导出图片）\nconst tempStep6 = Vue.extend({\n    template:\n        `<div class=\"tempStep6\">\n        <span class=\"tempStep6-circle\"></span>\n        <span class=\"tempStep6-dotted\"></span>\n        <span class=\"tempStep6-line\"></span>\n        <div style=\"width:264px\" class=\"tempStep_textBox\">\n            <p>${ noviceGuide.step6.text }</p>\n            <span id=\"guideQuit\">退出(${ noviceGuide.step6.num }/${ noviceGuide.totalStep })</span>\n        </div>\n    </div>`\n})\n\nexport default {\n\n\n    data(): iData {\n        return {\n            step: 1,\n            guidMask: null,\n            tempDiv: null\n        }\n    },\n    mixins: [\n        toast,\n        pointsMixin\n    ],\n    mounted() {\n    },\n\n    computed: {\n        ...mapGetters('config', [\n            'isShowNoviceGuide'\n        ])\n    },\n\n\n    methods: {\n\n        ...mapMutations('config', [\n            '_SetIsShowNoviceGuide',\n            '_SetGuideStep'\n        ]),\n\n\n        showGuide(step: any, className: string) {\n            // @ts-ignore\n            this.step = step\n            // @ts-ignore\n            this.$nextTick(async _ => {\n                // @ts-ignore\n                if (this.isShowNoviceGuide) {\n                    // 当前步骤存储\n                    this._SetGuideStep(step)\n                    // @ts-ignore\n                    this.PointInitGuide(step)\n                    const res = await find(SHOWED_NOVICE_GUIDE)\n                    if (!res) {\n                        await DBIpcRender.insertToDB(DICTIONARY_TABLE, {\n                            keyword: SHOWED_NOVICE_GUIDE,\n                            value: APP_VERSION\n                        })\n                    }\n\n                    const guidMask = new noviceGuideUtil()\n                    // @ts-ignore\n                    this.guidMask = guidMask\n                    guidMask.addMask()\n                    guidMask.showGuide(step, className)\n                    this.commonMountFunc(step, className)\n                    const quiteNode = document.getElementById('guideQuit')\n                    // @ts-ignore\n                    quiteNode ? quiteNode.addEventListener('click', e => {\n                        this.allGuideQuit(step, className)\n                    }) : ''\n                }\n\n            })\n        },\n\n        /**\n         * 自定义挂载\n         */\n        commonMountFunc(step: number, className: any) {\n            const tempDiv = <HTMLImageElement>document.createElement('div')\n            tempDiv.setAttribute('id', `${ className }-tempDiv`)\n\n            let node = document.getElementsByClassName(className)[0]\n            // @ts-ignore\n\n            node ? node.parentNode.appendChild(tempDiv) : ''\n            switch (step) {\n                case 1:\n                    new tempStep1().$mount(`#${ className }-tempDiv`)\n                    break\n                case 2:\n                    new tempStep2().$mount(`#${ className }-tempDiv`)\n                    break\n                case 3:\n                    new tempStep3().$mount(`#${ className }-tempDiv`)\n                    break\n                case 4:\n                    new tempStep4().$mount(`#${ className }-tempDiv`)\n                    break\n                case 5:\n                    new tempStep5().$mount(`#${ className }-tempDiv`)\n                    break\n                case 6:\n                    new tempStep6().$mount(`#${ className }-tempDiv`)\n                    break\n            }\n        },\n\n        /**\n         * 退出当前引导（进入下一个引导）\n         * 1：移除高亮区域；2：移除遮罩；3：移除tips提示\n         */\n        async guideQuit(className: any) {\n            //@ts-ignore\n            if (!this.isShowNoviceGuide) {\n                return false\n            }\n\n            document.getElementsByClassName(className)[0].removeAttribute('style')\n            // @ts-ignore\n            this.guidMask.close()\n            // @ts-ignore\n            let myTemp = <HTMLImageElement>document.getElementsByClassName(`tempStep${ this.step }`)[0]\n            // @ts-ignore\n            // @ts-ignore\n            document.getElementsByClassName(className)[0].parentNode.removeChild(myTemp)\n\n            const quiteNode = document.getElementById('guideQuit')\n            // @ts-ignore\n            quiteNode ? quiteNode.removeEventListener('click', () => {\n            }) : ''\n        },\n\n        allGuideQuit(step: number, className: any) {\n            // @ts-ignore\n            this.tsConfirm({\n                title: '确认退出新手引导',\n                message: '您也可以在右上角新手教程中查看具体教程',\n                customMessageStyle: 'textAlign: center'\n            }).then(() => {\n                this.guideQuit(className)\n                // @ts-ignore\n                this._SetIsShowNoviceGuide(false)\n                // @ts-ignore\n                this.PointClickQuit(step)\n            }).catch(() => {\n\n            })\n        }\n    }\n}\n"],"sourceRoot":""}